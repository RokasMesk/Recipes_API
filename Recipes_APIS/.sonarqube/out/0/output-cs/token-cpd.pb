¸
RC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\WeatherForecast.cs
	namespace 	
Recipes_API
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateOnly 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
TemperatureC 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
int		 
TemperatureF		 
=>		  "
$num		# %
+		& '
(		( )
int		) ,
)		, -
(		- .
TemperatureC		. :
/		; <
$num		= C
)		C D
;		D E
public 
string 
? 
Summary 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
Strtr 
{ 
get 
; 
set  #
;# $
}% &
} 
} ï

iC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Interface\IUserRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
	Interface '
{ 
public 

	interface 
IUserRepository $
{ 
Task 
< 
Product 
> 
CreateAsync !
(! "
Product" )
product* 1
)1 2
;2 3
Task 
< 
IEnumerable 
< 
Product  
>  !
>! "
GetAllAsync# .
(. /
)/ 0
;0 1
Task		 
<		 
Product		 
?		 
>		 
GetByIdAsync		 #
(		# $
int		$ '
id		( *
)		* +
;		+ ,
Task

 
<

 
Product

 
?

 
>

 
UpdateAsync

 "
(

" #
Product

# *
product

+ 2
)

2 3
;

3 4
Task 
< 
Product 
? 
> 
DeleteAsync "
(" #
int# &
id' )
)) *
;* +
} 
} ‘
jC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Interface\ITokenRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
	Interface '
{ 
public 

	interface 
ITokenRepository %
{ 
string 
CreateJwtToken 
( 
IdentityUser *
user+ /
,/ 0
List1 5
<5 6
string6 <
>< =
roles> C
)C D
;D E
}		 
}

 Ç
oC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Interface\IRecipeTypeRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
	Interface '
{ 
public 

	interface !
IRecipeTypeRepository *
{ 
Task 
< 

RecipeType 
? 
> 
GetByIdAsync &
(& '
int' *
id+ -
)- .
;. /
Task 
< 
IEnumerable 
< 

RecipeType #
># $
?$ %
>% &
GetAllTypes' 2
(2 3
)3 4
;4 5
}		 
}

 ¨
kC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Interface\IRecipeRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
	Interface '
{ 
public 

	interface 
IRecipeRepository &
{ 
Task 
< 
Recipee 
> 
CreateAsync  
(  !
Recipee! (
recipee) 0
)0 1
;1 2
Task 
< 
IEnumerable 
< 
Recipee  
>  !
>! "
GetAllAsync# .
(. /
)/ 0
;0 1
Task		 
<		 
Recipee		 
?		 
>		 
GetByIdAsync		 #
(		# $
int		$ '
id		( *
)		* +
;		+ ,
Task

 
<

 
Recipee

 
?

 
>

 
UpdateAsync

 "
(

" #
Recipee

# *
recipee

+ 2
)

2 3
;

3 4
Task 
< 
Recipee 
? 
> 
DeleteAsync "
(" #
int# &
id' )
)) *
;* +
Task 
< 
IEnumerable 
< 
Recipee  
?  !
>! "
>" #
SearchByTitleAsync$ 6
(6 7
string7 =
title> C
)C D
;D E
Task 
< 
IEnumerable 
< 
Recipee  
?  !
>! "
>" #
GetRecipesByUserId$ 6
(6 7
string7 =
id> @
)@ A
;A B
Task %
AddRecipeToFavoritesAsync &
(& '
string' -
userId. 4
,4 5
int6 9
recipeId: B
)B C
;C D
Task *
RemoveRecipeFromFavoritesAsync +
(+ ,
string, 2
userId3 9
,9 :
int; >
recipeId? G
)G H
;H I
Task 
< 
List 
< 
Recipee 
> 
> *
GetFavoriteRecipesForUserAsync :
(: ;
string; A
userIdB H
)H I
;I J
Task 
< 
List 
< 
Recipee 
> 
> -
!SearchBySelectedProductNamesAsync =
(= >
List> B
<B C
stringC I
>I J 
selectedProductNamesK _
)_ `
;` a
Task 
AddRatingAsync 
( 
string "
userId# )
,) *
int+ .
recipeId/ 7
,7 8
float9 >
rating? E
)E F
;F G
Task 
< 
float 
> !
GetAverageRatingAsync )
() *
string* 0
userId1 7
,7 8
int9 <
recipeId= E
)E F
;F G
Task 
AddCommentAsync 
( 
Comment $
comment% ,
), -
;- .
Task 
< 
IEnumerable 
< 
Comment  
>  !
>! "&
GetCommentsByRecipeIdAsync# =
(= >
int> A
recipeIdB J
)J K
;K L
} 
} Ó
lC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Interface\IProductRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
	Interface '
{ 
public 

	interface 
IProductRepository '
{ 
Task 
< 
Product 
> 
CreateAsync !
(! "
Product" )
product* 1
)1 2
;2 3
Task 
< 
IEnumerable 
< 
Product  
>  !
>! "
GetAllAsync# .
(. /
)/ 0
;0 1
Task		 
<		 
IEnumerable		 
<		 
Product		 
>		 
>		 %
GetAllNonVerifiedProducts		 6
(		6 7
)		7 8
;		8 9
Task

 
<

 
Product

 
?

 
>

 
UpdateVerifiedAsync

 *
(

* +
Product

+ 2
product

3 :
)

: ;
;

; <
Task 
< 
Product 
? 
> 
GetByIdAsync 
( 
int !
id" $
)$ %
;% &
Task 
< 
Product 
? 
> 
UpdateAsync "
(" #
Product# *
product+ 2
)2 3
;3 4
Task 
< 
Product 
? 
> 
DeleteAsync "
(" #
int# &
id' )
)) *
;* +
Task 
< 
List 
< 
Product 
> 
> -
!SearchBySelectedProductNamesAsync =
(= >
List> B
<B C
stringC I
>I J 
selectedProductNamesK _
)_ `
;` a
} 
} Î
nC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Implementation\TokenRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
Implementation ,
{ 
public 

class 
TokenRepository  
:! "
ITokenRepository# 3
{ 
private 
readonly 
IConfiguration '
_config( /
;/ 0
public 
TokenRepository 
( 
IConfiguration -
config. 4
)4 5
{ 	
_config 
= 
config 
; 
} 	
public 
string 
CreateJwtToken $
($ %
IdentityUser% 1
user2 6
,6 7
List8 <
<< =
string= C
>C D
rolesE J
)J K
{ 	
var 
claims 
= 
new 
List !
<! "
Claim" '
>' (
(( )
)) *
{ 
new 
Claim 
( 

ClaimTypes $
.$ %
Email% *
,* +
user, 0
.0 1
Email1 6
)6 7
} 
; 
claims 
. 
AddRange 
( 
roles !
.! "
Select" (
(( )
role) -
=>. 0
new1 4
Claim5 :
(: ;

ClaimTypes; E
.E F
RoleF J
,J K
roleL P
)P Q
)Q R
)R S
;S T
var 
key 
= 
new  
SymmetricSecurityKey .
(. /
Encoding/ 7
.7 8
UTF88 <
.< =
GetBytes= E
(E F
_configF M
[M N
$strN W
]W X
)X Y
)Y Z
;Z [
var   
credentials   
=   
new   !
SigningCredentials  " 4
(  4 5
key  5 8
,  8 9
SecurityAlgorithms  : L
.  L M

HmacSha256  M W
)  W X
;  X Y
var"" 
token"" 
="" 
new"" 
JwtSecurityToken"" ,
("", -
issuer## 
:## 
_config## 
[##  
$str##  ,
]##, -
,##- .
audience$$ 
:$$ 
_config$$ !
[$$! "
$str$$" 0
]$$0 1
,$$1 2
claims%% 
:%% 
claims%% 
,%% 
expires&& 
:&& 
DateTime&& !
.&&! "
Now&&" %
.&&% &

AddMinutes&&& 0
(&&0 1
$num&&1 3
)&&3 4
,&&4 5
signingCredentials'' "
:''" #
credentials''$ /
)''/ 0
;''0 1
return)) 
new)) #
JwtSecurityTokenHandler)) .
()). /
)))/ 0
.))0 1

WriteToken))1 ;
()); <
token))< A
)))A B
;))B C
}** 	
}++ 
},, ”
sC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Implementation\RecipeTypeRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
Implementation ,
{ 
public 

class  
RecipeTypeRepository %
:& '!
IRecipeTypeRepository( =
{		 
private

 
readonly

  
ApplicationDbContext

 -
_db

. 1
;

1 2
public  
RecipeTypeRepository #
(# $ 
ApplicationDbContext$ 8
db9 ;
); <
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 

RecipeType $
?$ %
>% &
GetByIdAsync' 3
(3 4
int4 7
id8 :
): ;
{ 	
return 
await 
_db 
. 
RecipeTypes (
.( )
FirstOrDefaultAsync) <
(< =
x= >
=>? A
xB C
.C D
IdD F
==G I
idJ L
)L M
;M N
} 	
public 
async 
Task 
< 
IEnumerable %
<% &

RecipeType& 0
>0 1
?1 2
>2 3
GetAllTypes4 ?
(? @
)@ A
{ 	
return 
await 
_db 
. 
RecipeTypes (
.( )
ToListAsync) 4
(4 5
)5 6
;6 7
} 	
} 
} éñ
oC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Implementation\RecipeRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
Implementation ,
{ 
public 

class 
RecipeRepository !
:" #
IRecipeRepository$ 5
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public 
RecipeRepository 
(   
ApplicationDbContext  4
db5 7
)7 8
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 
Recipee !
>! "
CreateAsync# .
(. /
Recipee/ 6
recipee7 >
)> ?
{ 	
await 
_db 
. 
Recipes 
. 
AddAsync &
(& '
recipee' .
). /
;/ 0
await 
_db 
. 
SaveChangesAsync &
(& '
)' (
;( )
return 
recipee 
; 
} 	
public 
async 
Task 
< 
Recipee !
?! "
>" #
DeleteAsync$ /
(/ 0
int0 3
id4 6
)6 7
{ 	
var 
existingRecipe 
=  
await! &
_db' *
.* +
Recipes+ 2
.2 3
FirstOrDefaultAsync3 F
(F G
xG H
=>I K
xL M
.M N
IdN P
==Q S
idT V
)V W
;W X
if 
( 
existingRecipe 
!= !
null" &
)& '
{   
_db!! 
.!! 
Recipes!! 
.!! 
Remove!! "
(!!" #
existingRecipe!!# 1
)!!1 2
;!!2 3
await"" 
_db"" 
."" 
SaveChangesAsync"" *
(""* +
)""+ ,
;"", -
return## 
existingRecipe## %
;##% &
}$$ 
return%% 
null%% 
;%% 
}&& 	
public)) 
async)) 
Task)) 
<)) 
IEnumerable)) %
<))% &
Recipee))& -
>))- .
>)). /
GetAllAsync))0 ;
()); <
)))< =
{** 	
return++ 
await++ 
_db++ 
.++ 
Recipes++ $
.++$ %
Include++% ,
(++, -
x++- .
=>++/ 1
x++2 3
.++3 4
User++4 8
)++8 9
.++9 :
Include++: A
(++A B
x++B C
=>++D F
x++G H
.++H I
Products++I Q
)++Q R
.++R S
Include++S Z
(++Z [
x++[ \
=>++\ ^
x++_ `
.++` a
Type++a e
)++e f
.++f g
ToListAsync++g r
(++r s
)++s t
;++t u
}-- 	
public// 
async// 
Task// 
<// 
Recipee// !
?//! "
>//" #
GetByIdAsync//$ 0
(//0 1
int//1 4
id//5 7
)//7 8
{00 	
return11 
await11 
_db11 
.11 
Recipes11 $
.11$ %
Include11% ,
(11, -
x11- .
=>11/ 1
x112 3
.113 4
User114 8
)118 9
.119 :
Include11: A
(11A B
x11B C
=>11C E
x11F G
.11G H
Products11H P
)11P Q
.11Q R
Include11R Y
(11Y Z
x11Z [
=>11[ ]
x11^ _
.11_ `
Type11` d
)11d e
.11e f
FirstOrDefaultAsync22 #
(22# $
x22$ %
=>22& (
x22) *
.22* +
Id22+ -
==22. 0
id221 3
)223 4
;224 5
}33 	
public55 
async55 
Task55 
<55 
Recipee55 !
?55! "
>55" #
UpdateAsync55$ /
(55/ 0
Recipee550 7
recipee558 ?
)55? @
{66 	
var77 
existingRecipe77 
=77  
await77! &
_db77' *
.77* +
Recipes77+ 2
.772 3
Include773 :
(77: ;
x77; <
=>77= ?
x77@ A
.77A B
Products77B J
)77J K
.77K L
Include77L S
(77S T
x77T U
=>77U W
x77X Y
.77Y Z
Type77Z ^
)77^ _
.77_ `
FirstOrDefaultAsync88 #
(88# $
x88$ %
=>88& (
x88) *
.88* +
Id88+ -
==88. 0
recipee881 8
.888 9
Id889 ;
)88; <
;88< =
if99 
(99 
existingRecipe99 
==99 !
null99" &
)99& '
{:: 
return;; 
null;; 
;;; 
}<< 
_db== 
.== 
Entry== 
(== 
existingRecipe== $
)==$ %
.==% &
CurrentValues==& 3
.==3 4
	SetValues==4 =
(=== >
recipee==> E
)==E F
;==F G
existingRecipe>> 
.>> 
Products>> #
=>>$ %
recipee>>& -
.>>- .
Products>>. 6
;>>6 7
existingRecipe?? 
.?? 
Type?? 
=??  !
recipee??" )
.??) *
Type??* .
;??. /
await@@ 
_db@@ 
.@@ 
SaveChangesAsync@@ &
(@@& '
)@@' (
;@@( )
returnAA 
recipeeAA 
;AA 
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 
IEnumerableDD %
<DD% &
RecipeeDD& -
>DD- .
>DD. /
SearchByTitleAsyncDD0 B
(DDB C
stringDDC I
titleDDJ O
)DDO P
{EE 	
returnFF 
awaitFF 
_dbFF 
.FF 
RecipesFF $
.FF$ %
WhereFF% *
(FF* +
recipeeFF+ 2
=>FF3 5
recipeeFF6 =
.FF= >
TitleFF> C
.FFC D
ContainsFFD L
(FFL M
titleFFM R
)FFR S
)FFS T
.FFT U
ToListAsyncFFU `
(FF` a
)FFa b
;FFb c
}GG 	
publicII 
asyncII 
TaskII 
<II 
IEnumerableII %
<II% &
RecipeeII& -
?II- .
>II. /
>II/ 0
GetRecipesByUserIdII1 C
(IIC D
stringIID J
idIIK M
)IIM N
{JJ 	
varKK 
recipesKK 
=KK 
awaitKK 
_dbKK  #
.KK# $
RecipesKK$ +
.KK+ ,
IncludeKK, 3
(KK3 4
xKK4 5
=>KK6 8
xKK9 :
.KK: ;
ProductsKK; C
)KKC D
.KKD E
IncludeKKE L
(KKL M
xKKM N
=>KKO Q
xKKR S
.KKS T
TypeKKT X
)KKX Y
.KKY Z
WhereKKZ _
(KK_ `
rKK` a
=>KKb d
rKKe f
.KKf g
UserKKg k
.KKk l
IdKKl n
==KKo q
idKKr t
)KKt u
.KKu v
ToListAsync	KKv Å
(
KKÅ Ç
)
KKÇ É
;
KKÉ Ñ
returnLL 
recipesLL 
;LL 
}MM 	
publicOO 
asyncOO 
TaskOO %
AddRecipeToFavoritesAsyncOO 3
(OO3 4
stringOO4 :
userIdOO; A
,OOA B
intOOC F
recipeIdOOG O
)OOO P
{PP 	
varQQ 
favoriteRecordQQ 
=QQ  
newQQ! $
UserFavoriteRecipeQQ% 7
{RR 
UserIdSS 
=SS 
userIdSS 
,SS  
	RecipeeIdTT 
=TT 
recipeIdTT $
}UU 
;UU 
_dbWW 
.WW 
UserFavoriteRecipesWW #
.WW# $
AddWW$ '
(WW' (
favoriteRecordWW( 6
)WW6 7
;WW7 8
awaitXX 
_dbXX 
.XX 
SaveChangesAsyncXX &
(XX& '
)XX' (
;XX( )
}YY 	
public[[ 
async[[ 
Task[[ *
RemoveRecipeFromFavoritesAsync[[ 8
([[8 9
string[[9 ?
userId[[@ F
,[[F G
int[[H K
recipeId[[L T
)[[T U
{\\ 	
var]] 
favoriteToRemove]]  
=]]! "
await]]# (
_db]]) ,
.]], -
UserFavoriteRecipes]]- @
.^^+ ,
FirstOrDefaultAsync^^, ?
(^^? @
ufr^^@ C
=>^^D F
ufr^^G J
.^^J K
UserId^^K Q
==^^R T
userId^^U [
&&^^\ ^
ufr^^_ b
.^^b c
	RecipeeId^^c l
==^^m o
recipeId^^p x
)^^x y
;^^y z
if`` 
(`` 
favoriteToRemove``  
!=``! #
null``$ (
)``( )
{aa 
_dbbb 
.bb 
UserFavoriteRecipesbb '
.bb' (
Removebb( .
(bb. /
favoriteToRemovebb/ ?
)bb? @
;bb@ A
awaitcc 
_dbcc 
.cc 
SaveChangesAsynccc *
(cc* +
)cc+ ,
;cc, -
}dd 
}ee 	
publicgg 
asyncgg 
Taskgg 
<gg 
Listgg 
<gg 
Recipeegg &
>gg& '
>gg' (*
GetFavoriteRecipesForUserAsyncgg) G
(ggG H
stringggH N
userIdggO U
)ggU V
{hh 	
returnii 
awaitii 
_dbii 
.ii 
UserFavoriteRecipesii 0
.jj 
Wherejj 
(jj 
ufrjj 
=>jj 
ufrjj !
.jj! "
UserIdjj" (
==jj) +
userIdjj, 2
)jj2 3
.kk 
Includekk 
(kk 
ufrkk 
=>kk 
ufrkk  #
.kk# $
Recipeekk$ +
)kk+ ,
.ll 
ThenIncludell  
(ll  !
recipell! '
=>ll( *
recipell+ 1
.ll1 2
Typell2 6
)ll6 7
.mm 
Includemm 
(mm 
ufrmm 
=>mm 
ufrmm  #
.mm# $
Recipeemm$ +
)mm+ ,
.nn 
ThenIncludenn  
(nn  !
recipenn! '
=>nn( *
recipenn+ 1
.nn1 2
Productsnn2 :
)nn: ;
.oo 
Includeoo 
(oo 
ufroo 
=>oo 
ufroo  #
.oo# $
Recipeeoo$ +
.oo+ ,
Useroo, 0
)oo0 1
.pp 
Selectpp 
(pp 
ufrpp 
=>pp 
ufrpp "
.pp" #
Recipeepp# *
)pp* +
.qq 
ToListAsyncqq 
(qq 
)qq 
;qq 
}ss 	
publictt 
asynctt 
Tasktt 
<tt 
Listtt 
<tt 
Recipeett &
>tt& '
>tt' (-
!SearchBySelectedProductNamesAsynctt) J
(ttJ K
ListttK O
<ttO P
stringttP V
>ttV W 
selectedProductNamesttX l
)ttl m
{uu 	
varvv 
recipesvv 
=vv 
awaitvv 
_dbvv  #
.vv# $
Recipesvv$ +
.vv+ ,
Wherevv, 1
(vv1 2
recipevv2 8
=>vv9 ;
recipevv< B
.vvB C
ProductsvvC K
.vvK L
AnyvvL O
(vvO P
productvvP W
=>vvX Z 
selectedProductNamesvv[ o
.vvo p
Containsvvp x
(vvx y
product	vvy Ä
.
vvÄ Å
ProductName
vvÅ å
)
vvå ç
)
vvç é
)
vvé è
.
vvè ê
Include
vvê ó
(
vvó ò
x
vvò ô
=>
vvô õ
x
vvõ ú
.
vvú ù
Type
vvù °
)
vv° ¢
.
vv¢ £
Include
vv£ ™
(
vv™ ´
x
vv´ ¨
=>
vv¨ Æ
x
vvÆ Ø
.
vvØ ∞
User
vv∞ ¥
)
vv¥ µ
.ww 
ToListAsyncww 
(ww 
)ww 
;ww 
returnzz 
recipeszz 
;zz 
}{{ 	
public}} 
async}} 
Task}} 
AddRatingAsync}} (
(}}( )
string}}) /
userId}}0 6
,}}6 7
int}}8 ;
recipeId}}< D
,}}D E
float}}F K
rating}}L R
)}}R S
{~~ 	
var 
recipe 
= 
await 
_db "
." #
Recipes# *
.* +
	FindAsync+ 4
(4 5
recipeId5 =
)= >
;> ?
if
ÄÄ 
(
ÄÄ 
recipe
ÄÄ 
==
ÄÄ 
null
ÄÄ 
)
ÄÄ 
{
ÅÅ 
throw
ÇÇ 
new
ÇÇ 
ArgumentException
ÇÇ +
(
ÇÇ+ ,
$"
ÇÇ, .
$str
ÇÇ. =
{
ÇÇ= >
recipeId
ÇÇ> F
}
ÇÇF G
$str
ÇÇG R
"
ÇÇR S
)
ÇÇS T
;
ÇÇT U
}
ÉÉ 
var
ÖÖ 
existingRating
ÖÖ 
=
ÖÖ  
await
ÖÖ! &
_db
ÖÖ' *
.
ÖÖ* +
UserRecipeRatings
ÖÖ+ <
.
ÜÜ !
FirstOrDefaultAsync
ÜÜ $
(
ÜÜ$ %
r
ÜÜ% &
=>
ÜÜ' )
r
ÜÜ* +
.
ÜÜ+ ,
UserId
ÜÜ, 2
==
ÜÜ3 5
userId
ÜÜ6 <
&&
ÜÜ= ?
r
ÜÜ@ A
.
ÜÜA B
	RecipeeId
ÜÜB K
==
ÜÜL N
recipeId
ÜÜO W
)
ÜÜW X
;
ÜÜX Y
if
àà 
(
àà 
existingRating
àà 
!=
àà !
null
àà" &
)
àà& '
{
ââ 
existingRating
ää 
.
ää 
RecipeRating
ää +
=
ää, -
rating
ää. 4
;
ää4 5
var
ãã 
totalRating
ãã 
=
ãã  !
recipe
ãã" (
.
ãã( )
Rating
ãã) /
*
ãã0 1
recipe
ãã2 8
.
ãã8 9
RatedPeopleCount
ãã9 I
;
ããI J
totalRating
åå 
-=
åå 
recipe
åå %
.
åå% &
Rating
åå& ,
;
åå, -
totalRating
çç 
+=
çç 
rating
çç %
;
çç% &
recipe
éé 
.
éé 
Rating
éé 
=
éé 
totalRating
éé  +
/
éé, -
recipe
éé. 4
.
éé4 5
RatedPeopleCount
éé5 E
;
ééE F
}
èè 
else
êê 
{
ëë 
recipe
íí 
.
íí 
RatedPeopleCount
íí '
++
íí' )
;
íí) *
var
ìì 
totalRating
ìì 
=
ìì  !
recipe
ìì" (
.
ìì( )
Rating
ìì) /
*
ìì0 1
(
ìì2 3
recipe
ìì3 9
.
ìì9 :
RatedPeopleCount
ìì: J
-
ììK L
$num
ììM N
)
ììN O
;
ììO P
totalRating
îî 
+=
îî 
rating
îî %
;
îî% &
recipe
ïï 
.
ïï 
Rating
ïï 
=
ïï 
totalRating
ïï  +
/
ïï, -
recipe
ïï. 4
.
ïï4 5
RatedPeopleCount
ïï5 E
;
ïïE F
_db
óó 
.
óó 
UserRecipeRatings
óó %
.
óó% &
Add
óó& )
(
óó) *
new
óó* -
UserRecipeRating
óó. >
{
òò 
UserId
ôô 
=
ôô 
userId
ôô #
,
ôô# $
	RecipeeId
öö 
=
öö 
recipeId
öö  (
,
öö( )
RecipeRating
õõ  
=
õõ! "
rating
õõ# )
}
úú 
)
úú 
;
úú 
}
ùù 
await
üü 
_db
üü 
.
üü 
SaveChangesAsync
üü &
(
üü& '
)
üü' (
;
üü( )
}
†† 	
public
¢¢ 
async
¢¢ 
Task
¢¢ 
<
¢¢ 
float
¢¢ 
>
¢¢  #
GetAverageRatingAsync
¢¢! 6
(
¢¢6 7
string
¢¢7 =
userId
¢¢> D
,
¢¢D E
int
¢¢F I
recipeId
¢¢J R
)
¢¢R S
{
££ 	
var
§§ 
ratings
§§ 
=
§§ 
await
§§ 
_db
§§  #
.
§§# $
UserRecipeRatings
§§$ 5
.
•• 
Where
•• 
(
•• 
r
•• 
=>
•• 
r
•• 
.
•• 
	RecipeeId
•• '
==
••( *
recipeId
••+ 3
)
••3 4
.
¶¶ 
Where
¶¶ 
(
¶¶ 
r
¶¶ 
=>
¶¶ 
r
¶¶ 
.
¶¶ 
UserId
¶¶ $
==
¶¶% '
userId
¶¶( .
)
¶¶. /
.
ßß !
FirstOrDefaultAsync
ßß $
(
ßß$ %
)
ßß% &
;
ßß& '
if
®® 
(
®® 
ratings
®® 
==
®® 
null
®® 
)
®®  
return
©© 
-
©© 
$num
©© 
;
©© 
return
´´ 
ratings
´´ 
.
´´ 
RecipeRating
´´ '
;
´´' (
}
¨¨ 	
public
ÆÆ 
async
ÆÆ 
Task
ÆÆ 
AddCommentAsync
ÆÆ )
(
ÆÆ) *
Comment
ÆÆ* 1
comment
ÆÆ2 9
)
ÆÆ9 :
{
ØØ 	
_db
∞∞ 
.
∞∞ 
Comments
∞∞ 
.
∞∞ 
Add
∞∞ 
(
∞∞ 
comment
∞∞ $
)
∞∞$ %
;
∞∞% &
await
±± 
_db
±± 
.
±± 
SaveChangesAsync
±± &
(
±±& '
)
±±' (
;
±±( )
}
≤≤ 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
IEnumerable
¥¥ %
<
¥¥% &
Comment
¥¥& -
>
¥¥- .
>
¥¥. /(
GetCommentsByRecipeIdAsync
¥¥0 J
(
¥¥J K
int
¥¥K N
recipeId
¥¥O W
)
¥¥W X
{
µµ 	
return
∂∂ 
await
∂∂ 
_db
∂∂ 
.
∂∂ 
Comments
∂∂ %
.
∑∑ 
Where
∑∑ 
(
∑∑ 
c
∑∑ 
=>
∑∑ 
c
∑∑ 
.
∑∑ 
RecipeId
∑∑ &
==
∑∑' )
recipeId
∑∑* 2
)
∑∑2 3
.
∏∏ 
ToListAsync
∏∏ 
(
∏∏ 
)
∏∏ 
;
∏∏ 
}
ππ 	
}
∫∫ 
}ªª Ï;
pC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Repositories\Implementation\ProductRepository.cs
	namespace 	
Recipe
 
. 
Repositories 
. 
Implementation ,
{		 
public

 

class

 
ProductRepository

 "
:

" #
IProductRepository

$ 6
{ 
private 
readonly  
ApplicationDbContext -
_db. 1
;1 2
public 
ProductRepository  
(  ! 
ApplicationDbContext! 5
db6 8
)8 9
{ 	
_db 
= 
db 
; 
} 	
public 
async 
Task 
< 
Product !
>! "
CreateAsync# .
(. /
Product/ 6
product7 >
)> ?
{ 	
await 
_db 
. 
Products 
. 
AddAsync '
(' (
product( /
)/ 0
;0 1
await 
_db 
. 
SaveChangesAsync &
(& '
)' (
;( )
return 
product 
; 
} 	
public 
async 
Task 
< 
Product !
?! "
>" #
DeleteAsync$ /
(/ 0
int0 3
id4 6
)6 7
{ 	
var 
existingProduct 
=  !
await" '
_db( +
.+ ,
Products, 4
.4 5
FirstOrDefaultAsync5 H
(H I
xI J
=>K M
xN O
.O P
IdP R
==S U
idV X
)X Y
;Y Z
if 
( 
existingProduct 
!=  "
null# '
)' (
{ 
_db 
. 
Products 
. 
Remove #
(# $
existingProduct$ 3
)3 4
;4 5
await 
_db 
. 
SaveChangesAsync *
(* +
)+ ,
;, -
return 
existingProduct &
;& '
}   
return!! 
null!! 
;!! 
}"" 	
public$$ 
async$$ 
Task$$ 
<$$ 
IEnumerable$$ %
<$$% &
Product$$& -
>$$- .
>$$. /
GetAllAsync$$0 ;
($$; <
)$$< =
{%% 	
return&& 
await&& 
_db&& 
.&& 
Products&& %
.&&% &
Where&&& +
(&&+ ,
x&&, -
=>&&- /
x&&0 1
.&&1 2

IsVerified&&2 <
==&&< >
true&&> B
)&&B C
.&&C D
ToListAsync&&D O
(&&O P
)&&P Q
;&&Q R
}'' 	
public(( 
async((	 
Task(( 
<(( 
IEnumerable(( 
<((  
Product((  '
>((' (
>((( )%
GetAllNonVerifiedProducts((* C
(((C D
)((D E
{)) 
return** 	
await**
 
_db** 
.** 
Products** 
.** 
Where** "
(**" #
x**# $
=>**% '
x**( )
.**) *

IsVerified*** 4
==**4 6
false**6 ;
)**; <
.**< =
ToListAsync**= H
(**H I
)**I J
;**J K
}++ 
public,, 
async,,	 
Task,, 
<,, 
Product,, 
?,, 
>,, 
GetByIdAsync,, *
(,,* +
int,,+ .
id,,/ 1
),,1 2
{-- 	
return.. 
await.. 
_db.. 
... 
Products.. %
...% &
FirstOrDefaultAsync// #
(//# $
x//$ %
=>//& (
x//) *
.//* +
Id//+ -
==//. 0
id//1 3
)//3 4
;//4 5
}00 	
public22 
async22 
Task22 
<22 
Product22 !
?22! "
>22" #
UpdateAsync22$ /
(22/ 0
Product220 7
product228 ?
)22? @
{33 	
var44 
existingProduct44 
=44  !
await44" '
_db44( +
.44+ ,
Products44, 4
.444 5
FirstOrDefaultAsync55 #
(55# $
x55$ %
=>55& (
x55) *
.55* +
Id55+ -
==55. 0
product551 8
.558 9
Id559 ;
)55; <
;55< =
if66 
(66 
existingProduct66 
==66  "
null66# '
)66' (
{77 
return88 
null88 
;88 
}99 
_db:: 
.:: 
Entry:: 
(:: 
existingProduct:: %
)::% &
.::& '
CurrentValues::' 4
.::4 5
	SetValues::5 >
(::> ?
product::? F
)::F G
;::G H
await<< 
_db<< 
.<< 
SaveChangesAsync<< &
(<<& '
)<<' (
;<<( )
return== 
product== 
;== 
}>> 	
public?? 
async?? 
Task?? 
<?? 
Product?? !
???! "
>??" #
UpdateVerifiedAsync??$ 7
(??7 8
Product??8 ?
product??@ G
)??G H
{@@ 	
varAA 
existingProductAA 
=AA  !
awaitAA" '
_dbAA( +
.AA+ ,
ProductsAA, 4
.AA4 5
FirstOrDefaultAsyncAA5 H
(AAH I
xAAI J
=>AAK M
xAAN O
.AAO P
IdAAP R
==AAR T
productAAT [
.AA[ \
IdAA\ ^
)AA^ _
;AA_ `
ifBB 
(BB 
existingProductBB 
==BB  "
nullBB# '
)BB' (
{CC 
returnDD 
nullDD 
;DD 
}EE 
existingProductFF 
.FF 

IsVerifiedFF &
=FF& '
trueFF( ,
;FF, -
_dbGG 
.GG 
EntryGG 
(GG 
existingProductGG 
)GG 
.GG 
CurrentValuesGG +
.GG+ ,
	SetValuesGG, 5
(GG5 6
productGG6 =
)GG= >
;GG> ?
awaitII 
_dbII	 
.II 
SaveChangesAsyncII 
(II 
)II 
;II  
returnJJ 	
existingProductJJ
 
;JJ 
}KK 
publicMM 
asyncMM	 
TaskMM 
<MM 
ListMM 
<MM 
ProductMM  
>MM  !
>MM! "-
!SearchBySelectedProductNamesAsyncMM# D
(MMD E
ListMME I
<MMI J
stringMMJ P
>MMP Q 
selectedProductNamesMMR f
)MMf g
{NN 	
returnPP 
awaitPP 
_dbPP 
.PP 
ProductsPP %
.QQ 
WhereQQ 
(QQ 
pQQ 
=>QQ  
selectedProductNamesQQ 0
.QQ0 1
ContainsQQ1 9
(QQ9 :
pQQ: ;
.QQ; <
ProductNameQQ< G
)QQG H
)QQH I
.RR 
ToListAsyncRR 
(RR 
)RR 
;RR 
}SS 	
}TT 
}UU ˜C
JC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
	AddScoped 
< 
ITokenRepository +
,+ ,
TokenRepository- <
>< =
(= >
)> ?
;? @
builder 
. 
Services 
. 
	AddScoped 
< 
IRecipeRepository ,
,, -
RecipeRepository. >
>> ?
(? @
)@ A
;A B
builder 
. 
Services 
. 
	AddScoped 
< 
IProductRepository -
,- .
ProductRepository/ @
>@ A
(A B
)B C
;C D
builder 
. 
Services 
. 
	AddScoped 
< !
IRecipeTypeRepository 0
,0 1 
RecipeTypeRepository2 F
>F G
(G H
)H I
;I J
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
{ 
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC L
)L M
)M N
;N O
} 
) 
; 
builder   
.   
Services   
.   
AddCors   
(   
options    
=>  ! #
{!! 
options"" 
."" 
AddDefaultPolicy"" 
("" 
builder"" $
=>""% '
{## 
builder$$ 
.$$ 
AllowAnyOrigin$$ 
($$ 
)$$  
.%% 
AllowAnyMethod%% 
(%% 
)%%  
.&& 
AllowAnyHeader&& 
(&& 
)&&  
;&&  !
}'' 
)'' 
;'' 
}(( 
)(( 
;(( 
builder** 
.** 
Services** 
.** 
AddIdentityCore**  
<**  !
ApplicationUser**! 0
>**0 1
(**1 2
)**2 3
.++ 
AddRoles++ 
<++ 
IdentityRole++ 
>++ 
(++ 
)++ 
.,, 
AddTokenProvider,, 
<,, &
DataProtectorTokenProvider,, 0
<,,0 1
ApplicationUser,,1 @
>,,@ A
>,,A B
(,,B C
$str,,C L
),,L M
.-- $
AddEntityFrameworkStores-- 
<--  
ApplicationDbContext-- 2
>--2 3
(--3 4
)--4 5
... $
AddDefaultTokenProviders.. 
(.. 
).. 
;..  
builder00 
.00 
Services00 
.00 
	Configure00 
<00 
IdentityOptions00 *
>00* +
(00+ ,
options00, 3
=>004 6
{11 
options22 
.22 
Password22 
.22 
RequireDigit22 !
=22" #
false22$ )
;22) *
options33 
.33 
Password33 
.33 
RequireLowercase33 %
=33& '
false33( -
;33- .
options44 
.44 
Password44 
.44 "
RequireNonAlphanumeric44 +
=44, -
false44. 3
;443 4
options55 
.55 
Password55 
.55 
RequireUppercase55 %
=55& '
false55( -
;55- .
options66 
.66 
Password66 
.66 
RequiredLength66 #
=66$ %
$num66& '
;66' (
options77 
.77 
Password77 
.77 
RequiredUniqueChars77 (
=77) *
$num77+ ,
;77, -
}88 
)88 
;88 
builder:: 
.:: 
Services:: 
.:: 
AddAuthentication:: "
(::" #
JwtBearerDefaults::# 4
.::4 5 
AuthenticationScheme::5 I
)::I J
.;; 
AddJwtBearer;; 
(;; 
options;; 
=>;; 
{<< 
options== 
.== %
TokenValidationParameters== )
===* +
new==, /
	Microsoft==0 9
.==9 :
IdentityModel==: G
.==G H
Tokens==H N
.==N O%
TokenValidationParameters==O h
{>> 	
AuthenticationType?? 
=??  
$str??! &
,??& '
ValidateIssuer@@ 
=@@ 
true@@ !
,@@! "
ValidateAudienceAA 
=AA 
trueAA #
,AA# $
ValidateLifetimeBB 
=BB 
trueBB #
,BB# $$
ValidateIssuerSigningKeyCC $
=CC% &
trueCC' +
,CC+ ,
ValidIssuerDD 
=DD 
builderDD !
.DD! "
ConfigurationDD" /
[DD/ 0
$strDD0 <
]DD< =
,DD= >
ValidAudienceEE 
=EE 
builderEE #
.EE# $
ConfigurationEE$ 1
[EE1 2
$strEE2 @
]EE@ A
,EEA B
IssuerSigningKeyFF 
=FF 
newFF " 
SymmetricSecurityKeyFF# 7
(FF7 8
SystemFF8 >
.FF> ?
TextFF? C
.FFC D
EncodingFFD L
.FFL M
UTF8FFM Q
.FFQ R
GetBytesFFR Z
(FFZ [
builderGG 
.GG 
ConfigurationGG %
[GG% &
$strGG& /
]GG/ 0
)GG0 1
)GG1 2
}HH 	
;HH	 

}II 
)II 
;II 
builderJJ 
.JJ 
ServicesJJ 
.JJ 
AddIdentityJJ 
<JJ 
ApplicationUserJJ ,
,JJ, -
IdentityRoleJJ. :
>JJ: ;
(JJ; <
)JJ< =
.KK $
AddEntityFrameworkStoresKK 
<KK  
ApplicationDbContextKK 2
>KK2 3
(KK3 4
)KK4 5
;KK5 6
builderMM 
.MM 
ServicesMM 
.MM 
	AddScopedMM 
<MM 
UserManagerMM &
<MM& '
ApplicationUserMM' 6
>MM6 7
>MM7 8
(MM8 9
)MM9 :
;MM: ;
builderNN 
.NN 
ServicesNN 
.NN 
	AddScopedNN 
<NN 
SignInManagerNN (
<NN( )
ApplicationUserNN) 8
>NN8 9
>NN9 :
(NN: ;
)NN; <
;NN< =
varPP 
appPP 
=PP 	
builderPP
 
.PP 
BuildPP 
(PP 
)PP 
;PP 
ifSS 
(SS 
appSS 
.SS 
EnvironmentSS 
.SS 
IsDevelopmentSS !
(SS! "
)SS" #
)SS# $
{TT 
appUU 
.UU 

UseSwaggerUU 
(UU 
)UU 
;UU 
appVV 
.VV 
UseSwaggerUIVV 
(VV 
)VV 
;VV 
}WW 
appYY 
.YY 
UseHttpsRedirectionYY 
(YY 
)YY 
;YY 
app[[ 
.[[ 
UseCors[[ 
([[ 
)[[ 
;[[ 
app\\ 
.\\ 
UseAuthentication\\ 
(\\ 
)\\ 
;\\ 
app]] 
.]] 
UseAuthorization]] 
(]] 
)]] 
;]] 
app__ 
.__ 
MapControllers__ 
(__ 
)__ 
;__ 
appaa 
.aa 
Runaa 
(aa 
)aa 	
;aa	 
ë	
ZC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\UserRecipeRating.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 
UserRecipeRating !
{ 
public 
required 
string 
UserId %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public		 
required		 
int		 
	RecipeeId		 %
{		& '
get		( +
;		+ ,
set		- 0
;		0 1
}		2 3
public 
float 
RecipeRating !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
$num2 3
;3 4
public 
ApplicationUser 
User #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
Recipee 
Recipee 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ö
\C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\UserFavoriteRecipe.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 
UserFavoriteRecipe #
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
	RecipeeId		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public

 
ApplicationUser

 
User

 #
{

$ %
get

& )
;

) *
set

+ .
;

. /
}

0 1
public 
Recipee 
Recipee 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ”
TC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\RecipeType.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 

RecipeType 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
?		 
Type		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
}

 
} ¬
QC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\Recipee.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 
Recipee 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
string 
? 
Title 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
ShortDescription '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
? 
Description "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
ImageUrl 
{  !
get" %
;% &
set' *
;* +
}, -
public 
ICollection 
< 
Product "
>" #
Products$ ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string 
? 
Preparation "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 

SkillLevel !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
TimeForCooking "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

RecipeType 
Type 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
ApplicationUser 
User #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
ICollection 
< 
UserFavoriteRecipe -
>- .
UserFavorites/ <
{= >
get? B
;B C
setD G
;G H
}I J
public 
double 
Rating 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
$num- .
;. /
public 
int 
RatedPeopleCount #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
$num4 5
;5 6
public 
ICollection 
< 
UserRecipeRating +
>+ ,
UserRatings- 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
=G H
newI L
ListM Q
<Q R
UserRecipeRatingR b
>b c
(c d
)d e
;e f
public 
ICollection 
< 
Comment "
>" #
Comments$ ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
} 
} É
QC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\Product.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 
Product 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
?		 
ProductName		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
public

 
bool

 

IsVerified

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
=

- .
false

/ 4
;

4 5
public 
ICollection 
< 
Recipee "
>" #
?# $
Recipes% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
} 
} û
UC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\UserDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
UserDTO 
{ 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public		 
string		 
?		 
UserName		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public

 
string

 
?

 
Email

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

( )
} 
} â
`C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\UserDescriptionDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
UserDescriptionDTO #
{ 
public 
string 
Email 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
string		 
UserDescription		 )
{		* +
get		, /
;		/ 0
set		1 4
;		4 5
}		6 7
} 
} ˛
dC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\UpdateRecipeRequestDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class "
UpdateRecipeRequestDTO '
{ 
public 
string 
? 
Title 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
string		 
?		 
ShortDescription		 '
{		( )
get		* -
;		- .
set		/ 2
;		2 3
}		4 5
public

 
string

 
?

 
Description

 "
{

# $
get

% (
;

( )
set

* -
;

- .
}

/ 0
public 
string 
? 
ImageUrl 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 
int 
> 
Products !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
new2 5
List6 :
<: ;
int; >
>> ?
(? @
)@ A
;A B
public 
string 
? 
Preparation "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 

SkillLevel !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
TimeForCooking "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
Type 
{ 
get 
; 
set "
;" #
}$ %
} 
} «
`C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\RegisterRequestDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
RegisterRequestDTO #
{		 
[

 	
	MinLength

	 
(

 
$num

 
,

 
ErrorMessage

 "
=

# $
$str

% N
)

N O
]

O P
[ 	
Required	 
] 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
	MinLength	 
( 
$num 
, 
ErrorMessage "
=# $
$str% K
)K L
]L M
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
	MinLength	 
( 
$num 
, 
ErrorMessage "
=# $
$str% N
)N O
]O P
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˝
[C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\RecipeTypeDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
RecipeTypeDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
?		 
Type		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
}

 
} ì
]C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\RecipeRatingDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
RecipeRatingDTO  
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
RecipeId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
float

 
Rating

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
} 
} ˇ
WC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\RecipeDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
	RecipeDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
?		 
Title		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public

 
string

 
?

 
ShortDescription

 '
{

( )
get

* -
;

- .
set

/ 2
;

2 3
}

4 5
public 
string 
? 
Description "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
ImageUrl 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 

ProductDTO 
> 
Products  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
new9 <
List= A
<A B

ProductDTOB L
>L M
(M N
)N O
;O P
public 
string 
? 
Preparation "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 

SkillLevel !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
TimeForCooking "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

RecipeType 
Type 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? !
RecipeCreatorUserName ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
double 
Rating 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
RatedPeopleCount #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} Ô
XC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\ProductDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 

ProductDTO 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public		 
string		 
ProductName		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
}

 
} Ë
^C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\ProductCreateDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 
class 
ProductCreateDTO 
{ 
public 
string	 
ProductName 
{ 
get !
;! "
set# &
;& '
}( )
}		 
}

 ˙
^C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\LoginResponseDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
LoginResponseDTO !
{ 
public 
string 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
string		 
Email		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
string

 
Token

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
List 
< 
string 
> 
Roles !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ﬂ
]C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\LoginRequestDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
LoginRequestDTO  
{ 
[		 	
	MinLength			 
(		 
$num		 
,		 
ErrorMessage		 "
=		# $
$str		% P
)		P Q
]		R S
public

 
string

 

Identifier

  
{

! "
get

# &
;

& '
set

( +
;

+ ,
}

- .
[ 	
	MinLength	 
( 
$num 
, 
ErrorMessage "
=# $
$str% N
)N O
]O P
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Å
]C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\CreateRecipeDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
CreateRecipeDTO  
{ 
public		 
string		 
Title		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
string

 
ShortDescription

 &
{

' (
get

) ,
;

, -
set

. 1
;

1 2
}

3 4
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
[ 
] 
Products 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Preparation !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 

SkillLevel  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
TimeForCooking !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
Type 
{ 
get 
; 
set "
;" #
}$ %
public 
string 
Author 
{ 
get "
;" #
set$ '
;' (
}) *
} 
}  
XC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\CommentDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 

CommentDTO 
{ 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
RecipeId		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
string

 
Comment

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 

AuthorName  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DateTime 
CreatedDate #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} ¬
_C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\DTO\ChangePasswordDTO.cs
	namespace 	
Recipe
 
. 
Models 
. 
DTO 
{ 
public 

class 
ChangePasswordDTO "
{ 
[		 	
Required			 
]		 
public

 
string

 
	UserEmail

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
[ 	
Required	 
] 
public 
string 
OldPassword !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
NewPassword !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} È
QC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\Comment.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 
Comment 
{ 
public		 
int		 
Id		 
{		 
get		 
;		 
set		  
;		  !
}		" #
public 
string 
Text 
{ 
get  
;  !
set" %
;% &
}' (
public 
DateTime 
PostedAt  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
ApplicationUser 
User #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 
RecipeId 
{ 
get !
;! "
set# &
;& '
}( )
public 
Recipee 
Recipe 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 

AuthorName  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} í
YC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Models\ApplicationUser.cs
	namespace 	
Recipe
 
. 
Models 
{ 
public 

class 
ApplicationUser  
:! "
IdentityUser" .
{ 
internal		 
string		 
UserDescription		 '
;		' (
public 
bool 
? 
IsAdmin 
{ 
get "
;" #
set$ '
;' (
}) *
public 
ICollection 
< 
UserFavoriteRecipe -
>- .
FavoriteRecipes/ >
{? @
getA D
;D E
setF I
;I J
}K L
public 
ICollection 
< 
UserRecipeRating +
>+ ,
RecipeRatings- :
{; <
get= @
;@ A
setB E
;E F
}G H
} 
} «
jC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Migrations\20240421182110_komentarai_v2.cs
	namespace 	
Recipe
 
. 

Migrations 
{ 
public 

partial 
class 
komentarai_v2 &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
string' -
>- .
(. /
name 
: 
$str "
," #
table 
: 
$str !
,! "
type 
: 
$str %
,% &
nullable 
: 
false 
,  
defaultValue 
: 
$str  
)  !
;! "
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str $
,$ %
	keyColumn 
: 
$str 
,  
keyValue 
: 
$str @
,@ A
columns 
: 
new 
[ 
] 
{  
$str! 3
,3 4
$str5 C
,C D
$strE T
}U V
,V W
values 
: 
new 
object "
[" #
]# $
{% &
$str' M
,M N
$str	O •
,
• ¶
$str
ß Õ
}
Œ œ
)
œ –
;
– —
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 

DropColumn '
(' (
name   
:   
$str   "
,  " #
table!! 
:!! 
$str!! !
)!!! "
;!!" #
migrationBuilder## 
.## 

UpdateData## '
(##' (
table$$ 
:$$ 
$str$$ $
,$$$ %
	keyColumn%% 
:%% 
$str%% 
,%%  
keyValue&& 
:&& 
$str&& @
,&&@ A
columns'' 
:'' 
new'' 
['' 
]'' 
{''  
$str''! 3
,''3 4
$str''5 C
,''C D
$str''E T
}''U V
,''V W
values(( 
:(( 
new(( 
object(( "
[((" #
]((# $
{((% &
$str((' M
,((M N
$str	((O •
,
((• ¶
$str
((ß Õ
}
((Œ œ
)
((œ –
;
((– —
})) 	
}** 
}++ ú2
gC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Migrations\20240421172137_komentarai.cs
	namespace 	
Recipe
 
. 

Migrations 
{ 
public		 

partial		 
class		 

komentarai		 #
:		$ %
	Migration		& /
{

 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Text 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
PostedAt 
= 
table $
.$ %
Column% +
<+ ,
DateTime, 4
>4 5
(5 6
type6 :
:: ;
$str< G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
UserId 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
RecipeId 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
table 
. 

ForeignKey $
($ %
name 
: 
$str >
,> ?
column 
: 
x  !
=>" $
x% &
.& '
UserId' -
,- .
principalTable &
:& '
$str( 5
,5 6
principalColumn   '
:  ' (
$str  ) -
,  - .
onDelete!!  
:!!  !
ReferentialAction!!" 3
.!!3 4
Cascade!!4 ;
)!!; <
;!!< =
table"" 
."" 

ForeignKey"" $
(""$ %
name## 
:## 
$str## <
,##< =
column$$ 
:$$ 
x$$  !
=>$$" $
x$$% &
.$$& '
RecipeId$$' /
,$$/ 0
principalTable%% &
:%%& '
$str%%( 1
,%%1 2
principalColumn&& '
:&&' (
$str&&) -
,&&- .
onDelete''  
:''  !
ReferentialAction''" 3
.''3 4
Cascade''4 ;
)''; <
;''< =
}(( 
)(( 
;(( 
migrationBuilder** 
.** 

UpdateData** '
(**' (
table++ 
:++ 
$str++ $
,++$ %
	keyColumn,, 
:,, 
$str,, 
,,,  
keyValue-- 
:-- 
$str-- @
,--@ A
columns.. 
:.. 
new.. 
[.. 
].. 
{..  
$str..! 3
,..3 4
$str..5 C
,..C D
$str..E T
}..U V
,..V W
values// 
:// 
new// 
object// "
[//" #
]//# $
{//% &
$str//' M
,//M N
$str	//O •
,
//• ¶
$str
//ß Õ
}
//Œ œ
)
//œ –
;
//– —
migrationBuilder11 
.11 
CreateIndex11 (
(11( )
name22 
:22 
$str22 ,
,22, -
table33 
:33 
$str33 !
,33! "
column44 
:44 
$str44 "
)44" #
;44# $
migrationBuilder66 
.66 
CreateIndex66 (
(66( )
name77 
:77 
$str77 *
,77* +
table88 
:88 
$str88 !
,88! "
column99 
:99 
$str99  
)99  !
;99! "
}:: 	
	protected== 
override== 
void== 
Down==  $
(==$ %
MigrationBuilder==% 5
migrationBuilder==6 F
)==F G
{>> 	
migrationBuilder?? 
.?? 
	DropTable?? &
(??& '
name@@ 
:@@ 
$str@@  
)@@  !
;@@! "
migrationBuilderBB 
.BB 

UpdateDataBB '
(BB' (
tableCC 
:CC 
$strCC $
,CC$ %
	keyColumnDD 
:DD 
$strDD 
,DD  
keyValueEE 
:EE 
$strEE @
,EE@ A
columnsFF 
:FF 
newFF 
[FF 
]FF 
{FF  
$strFF! 3
,FF3 4
$strFF5 C
,FFC D
$strFFE T
}FFU V
,FFV W
valuesGG 
:GG 
newGG 
objectGG "
[GG" #
]GG# $
{GG% &
$strGG' M
,GGM N
$str	GGO •
,
GG• ¶
$str
GGß Õ
}
GGŒ œ
)
GGœ –
;
GG– —
}HH 	
}II 
}JJ Â
yC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Migrations\20240420192139_verify attribute for product.cs
	namespace 	
Recipe
 
. 

Migrations 
{ 
public 

partial 
class %
verifyattributeforproduct 2
:3 4
	Migration5 >
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
	AddColumn &
<& '
bool' +
>+ ,
(, -
name 
: 
$str "
," #
table 
: 
$str !
,! "
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
false #
)# $
;$ %
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str !
,! "
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column 
: 
$str $
,$ %
value 
: 
false 
) 
; 
migrationBuilder 
. 

UpdateData '
(' (
table 
: 
$str !
,! "
	keyColumn 
: 
$str 
,  
keyValue 
: 
$num 
, 
column   
:   
$str   $
,  $ %
value!! 
:!! 
false!! 
)!! 
;!! 
}$$ 	
	protected'' 
override'' 
void'' 
Down''  $
(''$ %
MigrationBuilder''% 5
migrationBuilder''6 F
)''F G
{(( 	
migrationBuilder** 
.** 

DropColumn** '
(**' (
name++ 
:++ 
$str++ "
,++" #
table,, 
:,, 
$str,, !
),,! "
;,," #
}-- 	
}.. 
}// Â(
jC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Migrations\20240406192428_UserFavorites.cs
	namespace 	
Recipe
 
. 

Migrations 
{ 
public 

partial 
class 
UserFavorites &
:' (
	Migration) 2
{		 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str +
,+ ,
columns 
: 
table 
=> !
new" %
{ 
UserId 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
falseS X
)X Y
,Y Z
	RecipeeId 
= 
table  %
.% &
Column& ,
<, -
int- 0
>0 1
(1 2
type2 6
:6 7
$str8 =
,= >
nullable? G
:G H
falseI N
)N O
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% =
,= >
x? @
=>A C
newD G
{H I
xJ K
.K L
UserIdL R
,R S
xT U
.U V
	RecipeeIdV _
}` a
)a b
;b c
table 
. 

ForeignKey $
($ %
name 
: 
$str I
,I J
column 
: 
x  !
=>" $
x% &
.& '
UserId' -
,- .
principalTable &
:& '
$str( 5
,5 6
principalColumn '
:' (
$str) -
,- .
onDelete  
:  !
ReferentialAction" 3
.3 4
Cascade4 ;
); <
;< =
table 
. 

ForeignKey $
($ %
name 
: 
$str H
,H I
column 
: 
x  !
=>" $
x% &
.& '
	RecipeeId' 0
,0 1
principalTable   &
:  & '
$str  ( 1
,  1 2
principalColumn!! '
:!!' (
$str!!) -
,!!- .
onDelete""  
:""  !
ReferentialAction""" 3
.""3 4
Cascade""4 ;
)""; <
;""< =
}## 
)## 
;## 
migrationBuilder%% 
.%% 

UpdateData%% '
(%%' (
table&& 
:&& 
$str&& $
,&&$ %
	keyColumn'' 
:'' 
$str'' 
,''  
keyValue(( 
:(( 
$str(( @
,((@ A
columns)) 
:)) 
new)) 
[)) 
])) 
{))  
$str))! 3
,))3 4
$str))5 C
,))C D
$str))E T
}))U V
,))V W
values** 
:** 
new** 
object** "
[**" #
]**# $
{**% &
$str**' M
,**M N
$str	**O •
,
**• ¶
$str
**ß Õ
}
**Œ œ
)
**œ –
;
**– —
migrationBuilder,, 
.,, 
CreateIndex,, (
(,,( )
name-- 
:-- 
$str-- 8
,--8 9
table.. 
:.. 
$str.. ,
,.., -
column// 
:// 
$str// #
)//# $
;//$ %
}00 	
	protected33 
override33 
void33 
Down33  $
(33$ %
MigrationBuilder33% 5
migrationBuilder336 F
)33F G
{44 	
migrationBuilder55 
.55 
	DropTable55 &
(55& '
name66 
:66 
$str66 +
)66+ ,
;66, -
migrationBuilder88 
.88 

UpdateData88 '
(88' (
table99 
:99 
$str99 $
,99$ %
	keyColumn:: 
::: 
$str:: 
,::  
keyValue;; 
:;; 
$str;; @
,;;@ A
columns<< 
:<< 
new<< 
[<< 
]<< 
{<<  
$str<<! 3
,<<3 4
$str<<5 C
,<<C D
$str<<E T
}<<U V
,<<V W
values== 
:== 
new== 
object== "
[==" #
]==# $
{==% &
$str==' M
,==M N
$str	==O •
,
==• ¶
$str
==ß Õ
}
==Œ œ
)
==œ –
;
==– —
}>> 	
}?? 
}@@ ¨‘
aC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Migrations\20240402091857_init.cs
	namespace 	
Recipe
 
. 

Migrations 
{		 
public 

partial 
class 
init 
: 
	Migration  )
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 C
,C D
nullableE M
:M N
falseO T
)T U
,U V
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
	maxLengthG P
:P Q
$numR U
,U V
nullableW _
:_ `
truea e
)e f
,f g
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
	maxLengthQ Z
:Z [
$num\ _
,_ `
nullablea i
:i j
truek o
)o p
,p q
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
type< @
:@ A
$strB Q
,Q R
nullableS [
:[ \
true] a
)a b
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns   
:   
table   
=>   !
new  " %
{!! 
Id"" 
="" 
table"" 
."" 
Column"" %
<""% &
string""& ,
>"", -
(""- .
type"". 2
:""2 3
$str""4 C
,""C D
nullable""E M
:""M N
false""O T
)""T U
,""U V
IsAdmin## 
=## 
table## #
.### $
Column##$ *
<##* +
bool##+ /
>##/ 0
(##0 1
type##1 5
:##5 6
$str##7 <
,##< =
nullable##> F
:##F G
true##H L
)##L M
,##M N
UserName$$ 
=$$ 
table$$ $
.$$$ %
Column$$% +
<$$+ ,
string$$, 2
>$$2 3
($$3 4
type$$4 8
:$$8 9
$str$$: I
,$$I J
	maxLength$$K T
:$$T U
$num$$V Y
,$$Y Z
nullable$$[ c
:$$c d
true$$e i
)$$i j
,$$j k
NormalizedUserName%% &
=%%' (
table%%) .
.%%. /
Column%%/ 5
<%%5 6
string%%6 <
>%%< =
(%%= >
type%%> B
:%%B C
$str%%D S
,%%S T
	maxLength%%U ^
:%%^ _
$num%%` c
,%%c d
nullable%%e m
:%%m n
true%%o s
)%%s t
,%%t u
Email&& 
=&& 
table&& !
.&&! "
Column&&" (
<&&( )
string&&) /
>&&/ 0
(&&0 1
type&&1 5
:&&5 6
$str&&7 F
,&&F G
	maxLength&&H Q
:&&Q R
$num&&S V
,&&V W
nullable&&X `
:&&` a
true&&b f
)&&f g
,&&g h
NormalizedEmail'' #
=''$ %
table''& +
.''+ ,
Column'', 2
<''2 3
string''3 9
>''9 :
('': ;
type''; ?
:''? @
$str''A P
,''P Q
	maxLength''R [
:''[ \
$num''] `
,''` a
nullable''b j
:''j k
true''l p
)''p q
,''q r
EmailConfirmed(( "
=((# $
table((% *
.((* +
Column((+ 1
<((1 2
bool((2 6
>((6 7
(((7 8
type((8 <
:((< =
$str((> C
,((C D
nullable((E M
:((M N
false((O T
)((T U
,((U V
PasswordHash))  
=))! "
table))# (
.))( )
Column))) /
<))/ 0
string))0 6
>))6 7
())7 8
type))8 <
:))< =
$str))> M
,))M N
nullable))O W
:))W X
true))Y ]
)))] ^
,))^ _
SecurityStamp** !
=**" #
table**$ )
.**) *
Column*** 0
<**0 1
string**1 7
>**7 8
(**8 9
type**9 =
:**= >
$str**? N
,**N O
nullable**P X
:**X Y
true**Z ^
)**^ _
,**_ `
ConcurrencyStamp++ $
=++% &
table++' ,
.++, -
Column++- 3
<++3 4
string++4 :
>++: ;
(++; <
type++< @
:++@ A
$str++B Q
,++Q R
nullable++S [
:++[ \
true++] a
)++a b
,++b c
PhoneNumber,, 
=,,  !
table,," '
.,,' (
Column,,( .
<,,. /
string,,/ 5
>,,5 6
(,,6 7
type,,7 ;
:,,; <
$str,,= L
,,,L M
nullable,,N V
:,,V W
true,,X \
),,\ ]
,,,] ^ 
PhoneNumberConfirmed-- (
=--) *
table--+ 0
.--0 1
Column--1 7
<--7 8
bool--8 <
>--< =
(--= >
type--> B
:--B C
$str--D I
,--I J
nullable--K S
:--S T
false--U Z
)--Z [
,--[ \
TwoFactorEnabled.. $
=..% &
table..' ,
..., -
Column..- 3
<..3 4
bool..4 8
>..8 9
(..9 :
type..: >
:..> ?
$str..@ E
,..E F
nullable..G O
:..O P
false..Q V
)..V W
,..W X

LockoutEnd// 
=//  
table//! &
.//& '
Column//' -
<//- .
DateTimeOffset//. <
>//< =
(//= >
type//> B
://B C
$str//D T
,//T U
nullable//V ^
://^ _
true//` d
)//d e
,//e f
LockoutEnabled00 "
=00# $
table00% *
.00* +
Column00+ 1
<001 2
bool002 6
>006 7
(007 8
type008 <
:00< =
$str00> C
,00C D
nullable00E M
:00M N
false00O T
)00T U
,00U V
AccessFailedCount11 %
=11& '
table11( -
.11- .
Column11. 4
<114 5
int115 8
>118 9
(119 :
type11: >
:11> ?
$str11@ E
,11E F
nullable11G O
:11O P
false11Q V
)11V W
}22 
,22 
constraints33 
:33 
table33 "
=>33# %
{44 
table55 
.55 

PrimaryKey55 $
(55$ %
$str55% 5
,555 6
x557 8
=>559 ;
x55< =
.55= >
Id55> @
)55@ A
;55A B
}66 
)66 
;66 
migrationBuilder88 
.88 
CreateTable88 (
(88( )
name99 
:99 
$str99  
,99  !
columns:: 
::: 
table:: 
=>:: !
new::" %
{;; 
Id<< 
=<< 
table<< 
.<< 
Column<< %
<<<% &
int<<& )
><<) *
(<<* +
type<<+ /
:<</ 0
$str<<1 6
,<<6 7
nullable<<8 @
:<<@ A
false<<B G
)<<G H
.== 

Annotation== #
(==# $
$str==$ 8
,==8 9
$str==: @
)==@ A
,==A B
ProductName>> 
=>>  !
table>>" '
.>>' (
Column>>( .
<>>. /
string>>/ 5
>>>5 6
(>>6 7
type>>7 ;
:>>; <
$str>>= L
,>>L M
nullable>>N V
:>>V W
true>>X \
)>>\ ]
}?? 
,?? 
constraints@@ 
:@@ 
table@@ "
=>@@# %
{AA 
tableBB 
.BB 

PrimaryKeyBB $
(BB$ %
$strBB% 2
,BB2 3
xBB4 5
=>BB6 8
xBB9 :
.BB: ;
IdBB; =
)BB= >
;BB> ?
}CC 
)CC 
;CC 
migrationBuilderEE 
.EE 
CreateTableEE (
(EE( )
nameFF 
:FF 
$strFF #
,FF# $
columnsGG 
:GG 
tableGG 
=>GG !
newGG" %
{HH 
IdII 
=II 
tableII 
.II 
ColumnII %
<II% &
intII& )
>II) *
(II* +
typeII+ /
:II/ 0
$strII1 6
,II6 7
nullableII8 @
:II@ A
falseIIB G
)IIG H
.JJ 

AnnotationJJ #
(JJ# $
$strJJ$ 8
,JJ8 9
$strJJ: @
)JJ@ A
,JJA B
TypeKK 
=KK 
tableKK  
.KK  !
ColumnKK! '
<KK' (
stringKK( .
>KK. /
(KK/ 0
typeKK0 4
:KK4 5
$strKK6 E
,KKE F
nullableKKG O
:KKO P
trueKKQ U
)KKU V
}LL 
,LL 
constraintsMM 
:MM 
tableMM "
=>MM# %
{NN 
tableOO 
.OO 

PrimaryKeyOO $
(OO$ %
$strOO% 5
,OO5 6
xOO7 8
=>OO9 ;
xOO< =
.OO= >
IdOO> @
)OO@ A
;OOA B
}PP 
)PP 
;PP 
migrationBuilderRR 
.RR 
CreateTableRR (
(RR( )
nameSS 
:SS 
$strSS (
,SS( )
columnsTT 
:TT 
tableTT 
=>TT !
newTT" %
{UU 
IdVV 
=VV 
tableVV 
.VV 
ColumnVV %
<VV% &
intVV& )
>VV) *
(VV* +
typeVV+ /
:VV/ 0
$strVV1 6
,VV6 7
nullableVV8 @
:VV@ A
falseVVB G
)VVG H
.WW 

AnnotationWW #
(WW# $
$strWW$ 8
,WW8 9
$strWW: @
)WW@ A
,WWA B
RoleIdXX 
=XX 
tableXX "
.XX" #
ColumnXX# )
<XX) *
stringXX* 0
>XX0 1
(XX1 2
typeXX2 6
:XX6 7
$strXX8 G
,XXG H
nullableXXI Q
:XXQ R
falseXXS X
)XXX Y
,XXY Z
	ClaimTypeYY 
=YY 
tableYY  %
.YY% &
ColumnYY& ,
<YY, -
stringYY- 3
>YY3 4
(YY4 5
typeYY5 9
:YY9 :
$strYY; J
,YYJ K
nullableYYL T
:YYT U
trueYYV Z
)YYZ [
,YY[ \

ClaimValueZZ 
=ZZ  
tableZZ! &
.ZZ& '
ColumnZZ' -
<ZZ- .
stringZZ. 4
>ZZ4 5
(ZZ5 6
typeZZ6 :
:ZZ: ;
$strZZ< K
,ZZK L
nullableZZM U
:ZZU V
trueZZW [
)ZZ[ \
}[[ 
,[[ 
constraints\\ 
:\\ 
table\\ "
=>\\# %
{]] 
table^^ 
.^^ 

PrimaryKey^^ $
(^^$ %
$str^^% :
,^^: ;
x^^< =
=>^^> @
x^^A B
.^^B C
Id^^C E
)^^E F
;^^F G
table__ 
.__ 

ForeignKey__ $
(__$ %
name`` 
:`` 
$str`` F
,``F G
columnaa 
:aa 
xaa  !
=>aa" $
xaa% &
.aa& '
RoleIdaa' -
,aa- .
principalTablebb &
:bb& '
$strbb( 5
,bb5 6
principalColumncc '
:cc' (
$strcc) -
,cc- .
onDeletedd  
:dd  !
ReferentialActiondd" 3
.dd3 4
Cascadedd4 ;
)dd; <
;dd< =
}ee 
)ee 
;ee 
migrationBuildergg 
.gg 
CreateTablegg (
(gg( )
namehh 
:hh 
$strhh (
,hh( )
columnsii 
:ii 
tableii 
=>ii !
newii" %
{jj 
Idkk 
=kk 
tablekk 
.kk 
Columnkk %
<kk% &
intkk& )
>kk) *
(kk* +
typekk+ /
:kk/ 0
$strkk1 6
,kk6 7
nullablekk8 @
:kk@ A
falsekkB G
)kkG H
.ll 

Annotationll #
(ll# $
$strll$ 8
,ll8 9
$strll: @
)ll@ A
,llA B
UserIdmm 
=mm 
tablemm "
.mm" #
Columnmm# )
<mm) *
stringmm* 0
>mm0 1
(mm1 2
typemm2 6
:mm6 7
$strmm8 G
,mmG H
nullablemmI Q
:mmQ R
falsemmS X
)mmX Y
,mmY Z
	ClaimTypenn 
=nn 
tablenn  %
.nn% &
Columnnn& ,
<nn, -
stringnn- 3
>nn3 4
(nn4 5
typenn5 9
:nn9 :
$strnn; J
,nnJ K
nullablennL T
:nnT U
truennV Z
)nnZ [
,nn[ \

ClaimValueoo 
=oo  
tableoo! &
.oo& '
Columnoo' -
<oo- .
stringoo. 4
>oo4 5
(oo5 6
typeoo6 :
:oo: ;
$stroo< K
,ooK L
nullableooM U
:ooU V
trueooW [
)oo[ \
}pp 
,pp 
constraintsqq 
:qq 
tableqq "
=>qq# %
{rr 
tabless 
.ss 

PrimaryKeyss $
(ss$ %
$strss% :
,ss: ;
xss< =
=>ss> @
xssA B
.ssB C
IdssC E
)ssE F
;ssF G
tablett 
.tt 

ForeignKeytt $
(tt$ %
nameuu 
:uu 
$struu F
,uuF G
columnvv 
:vv 
xvv  !
=>vv" $
xvv% &
.vv& '
UserIdvv' -
,vv- .
principalTableww &
:ww& '
$strww( 5
,ww5 6
principalColumnxx '
:xx' (
$strxx) -
,xx- .
onDeleteyy  
:yy  !
ReferentialActionyy" 3
.yy3 4
Cascadeyy4 ;
)yy; <
;yy< =
}zz 
)zz 
;zz 
migrationBuilder|| 
.|| 
CreateTable|| (
(||( )
name}} 
:}} 
$str}} (
,}}( )
columns~~ 
:~~ 
table~~ 
=>~~ !
new~~" %
{ 
LoginProvider
ÄÄ !
=
ÄÄ" #
table
ÄÄ$ )
.
ÄÄ) *
Column
ÄÄ* 0
<
ÄÄ0 1
string
ÄÄ1 7
>
ÄÄ7 8
(
ÄÄ8 9
type
ÄÄ9 =
:
ÄÄ= >
$str
ÄÄ? N
,
ÄÄN O
nullable
ÄÄP X
:
ÄÄX Y
false
ÄÄZ _
)
ÄÄ_ `
,
ÄÄ` a
ProviderKey
ÅÅ 
=
ÅÅ  !
table
ÅÅ" '
.
ÅÅ' (
Column
ÅÅ( .
<
ÅÅ. /
string
ÅÅ/ 5
>
ÅÅ5 6
(
ÅÅ6 7
type
ÅÅ7 ;
:
ÅÅ; <
$str
ÅÅ= L
,
ÅÅL M
nullable
ÅÅN V
:
ÅÅV W
false
ÅÅX ]
)
ÅÅ] ^
,
ÅÅ^ _!
ProviderDisplayName
ÇÇ '
=
ÇÇ( )
table
ÇÇ* /
.
ÇÇ/ 0
Column
ÇÇ0 6
<
ÇÇ6 7
string
ÇÇ7 =
>
ÇÇ= >
(
ÇÇ> ?
type
ÇÇ? C
:
ÇÇC D
$str
ÇÇE T
,
ÇÇT U
nullable
ÇÇV ^
:
ÇÇ^ _
true
ÇÇ` d
)
ÇÇd e
,
ÇÇe f
UserId
ÉÉ 
=
ÉÉ 
table
ÉÉ "
.
ÉÉ" #
Column
ÉÉ# )
<
ÉÉ) *
string
ÉÉ* 0
>
ÉÉ0 1
(
ÉÉ1 2
type
ÉÉ2 6
:
ÉÉ6 7
$str
ÉÉ8 G
,
ÉÉG H
nullable
ÉÉI Q
:
ÉÉQ R
false
ÉÉS X
)
ÉÉX Y
}
ÑÑ 
,
ÑÑ 
constraints
ÖÖ 
:
ÖÖ 
table
ÖÖ "
=>
ÖÖ# %
{
ÜÜ 
table
áá 
.
áá 

PrimaryKey
áá $
(
áá$ %
$str
áá% :
,
áá: ;
x
áá< =
=>
áá> @
new
ááA D
{
ááE F
x
ááG H
.
ááH I
LoginProvider
ááI V
,
ááV W
x
ááX Y
.
ááY Z
ProviderKey
ááZ e
}
ááf g
)
áág h
;
ááh i
table
àà 
.
àà 

ForeignKey
àà $
(
àà$ %
name
ââ 
:
ââ 
$str
ââ F
,
ââF G
column
ää 
:
ää 
x
ää  !
=>
ää" $
x
ää% &
.
ää& '
UserId
ää' -
,
ää- .
principalTable
ãã &
:
ãã& '
$str
ãã( 5
,
ãã5 6
principalColumn
åå '
:
åå' (
$str
åå) -
,
åå- .
onDelete
çç  
:
çç  !
ReferentialAction
çç" 3
.
çç3 4
Cascade
çç4 ;
)
çç; <
;
çç< =
}
éé 
)
éé 
;
éé 
migrationBuilder
êê 
.
êê 
CreateTable
êê (
(
êê( )
name
ëë 
:
ëë 
$str
ëë '
,
ëë' (
columns
íí 
:
íí 
table
íí 
=>
íí !
new
íí" %
{
ìì 
UserId
îî 
=
îî 
table
îî "
.
îî" #
Column
îî# )
<
îî) *
string
îî* 0
>
îî0 1
(
îî1 2
type
îî2 6
:
îî6 7
$str
îî8 G
,
îîG H
nullable
îîI Q
:
îîQ R
false
îîS X
)
îîX Y
,
îîY Z
RoleId
ïï 
=
ïï 
table
ïï "
.
ïï" #
Column
ïï# )
<
ïï) *
string
ïï* 0
>
ïï0 1
(
ïï1 2
type
ïï2 6
:
ïï6 7
$str
ïï8 G
,
ïïG H
nullable
ïïI Q
:
ïïQ R
false
ïïS X
)
ïïX Y
}
ññ 
,
ññ 
constraints
óó 
:
óó 
table
óó "
=>
óó# %
{
òò 
table
ôô 
.
ôô 

PrimaryKey
ôô $
(
ôô$ %
$str
ôô% 9
,
ôô9 :
x
ôô; <
=>
ôô= ?
new
ôô@ C
{
ôôD E
x
ôôF G
.
ôôG H
UserId
ôôH N
,
ôôN O
x
ôôP Q
.
ôôQ R
RoleId
ôôR X
}
ôôY Z
)
ôôZ [
;
ôô[ \
table
öö 
.
öö 

ForeignKey
öö $
(
öö$ %
name
õõ 
:
õõ 
$str
õõ E
,
õõE F
column
úú 
:
úú 
x
úú  !
=>
úú" $
x
úú% &
.
úú& '
RoleId
úú' -
,
úú- .
principalTable
ùù &
:
ùù& '
$str
ùù( 5
,
ùù5 6
principalColumn
ûû '
:
ûû' (
$str
ûû) -
,
ûû- .
onDelete
üü  
:
üü  !
ReferentialAction
üü" 3
.
üü3 4
Cascade
üü4 ;
)
üü; <
;
üü< =
table
†† 
.
†† 

ForeignKey
†† $
(
††$ %
name
°° 
:
°° 
$str
°° E
,
°°E F
column
¢¢ 
:
¢¢ 
x
¢¢  !
=>
¢¢" $
x
¢¢% &
.
¢¢& '
UserId
¢¢' -
,
¢¢- .
principalTable
££ &
:
££& '
$str
££( 5
,
££5 6
principalColumn
§§ '
:
§§' (
$str
§§) -
,
§§- .
onDelete
••  
:
••  !
ReferentialAction
••" 3
.
••3 4
Cascade
••4 ;
)
••; <
;
••< =
}
¶¶ 
)
¶¶ 
;
¶¶ 
migrationBuilder
®® 
.
®® 
CreateTable
®® (
(
®®( )
name
©© 
:
©© 
$str
©© (
,
©©( )
columns
™™ 
:
™™ 
table
™™ 
=>
™™ !
new
™™" %
{
´´ 
UserId
¨¨ 
=
¨¨ 
table
¨¨ "
.
¨¨" #
Column
¨¨# )
<
¨¨) *
string
¨¨* 0
>
¨¨0 1
(
¨¨1 2
type
¨¨2 6
:
¨¨6 7
$str
¨¨8 G
,
¨¨G H
nullable
¨¨I Q
:
¨¨Q R
false
¨¨S X
)
¨¨X Y
,
¨¨Y Z
LoginProvider
≠≠ !
=
≠≠" #
table
≠≠$ )
.
≠≠) *
Column
≠≠* 0
<
≠≠0 1
string
≠≠1 7
>
≠≠7 8
(
≠≠8 9
type
≠≠9 =
:
≠≠= >
$str
≠≠? N
,
≠≠N O
nullable
≠≠P X
:
≠≠X Y
false
≠≠Z _
)
≠≠_ `
,
≠≠` a
Name
ÆÆ 
=
ÆÆ 
table
ÆÆ  
.
ÆÆ  !
Column
ÆÆ! '
<
ÆÆ' (
string
ÆÆ( .
>
ÆÆ. /
(
ÆÆ/ 0
type
ÆÆ0 4
:
ÆÆ4 5
$str
ÆÆ6 E
,
ÆÆE F
nullable
ÆÆG O
:
ÆÆO P
false
ÆÆQ V
)
ÆÆV W
,
ÆÆW X
Value
ØØ 
=
ØØ 
table
ØØ !
.
ØØ! "
Column
ØØ" (
<
ØØ( )
string
ØØ) /
>
ØØ/ 0
(
ØØ0 1
type
ØØ1 5
:
ØØ5 6
$str
ØØ7 F
,
ØØF G
nullable
ØØH P
:
ØØP Q
true
ØØR V
)
ØØV W
}
∞∞ 
,
∞∞ 
constraints
±± 
:
±± 
table
±± "
=>
±±# %
{
≤≤ 
table
≥≥ 
.
≥≥ 

PrimaryKey
≥≥ $
(
≥≥$ %
$str
≥≥% :
,
≥≥: ;
x
≥≥< =
=>
≥≥> @
new
≥≥A D
{
≥≥E F
x
≥≥G H
.
≥≥H I
UserId
≥≥I O
,
≥≥O P
x
≥≥Q R
.
≥≥R S
LoginProvider
≥≥S `
,
≥≥` a
x
≥≥b c
.
≥≥c d
Name
≥≥d h
}
≥≥i j
)
≥≥j k
;
≥≥k l
table
¥¥ 
.
¥¥ 

ForeignKey
¥¥ $
(
¥¥$ %
name
µµ 
:
µµ 
$str
µµ F
,
µµF G
column
∂∂ 
:
∂∂ 
x
∂∂  !
=>
∂∂" $
x
∂∂% &
.
∂∂& '
UserId
∂∂' -
,
∂∂- .
principalTable
∑∑ &
:
∑∑& '
$str
∑∑( 5
,
∑∑5 6
principalColumn
∏∏ '
:
∏∏' (
$str
∏∏) -
,
∏∏- .
onDelete
ππ  
:
ππ  !
ReferentialAction
ππ" 3
.
ππ3 4
Cascade
ππ4 ;
)
ππ; <
;
ππ< =
}
∫∫ 
)
∫∫ 
;
∫∫ 
migrationBuilder
ºº 
.
ºº 
CreateTable
ºº (
(
ºº( )
name
ΩΩ 
:
ΩΩ 
$str
ΩΩ 
,
ΩΩ  
columns
ææ 
:
ææ 
table
ææ 
=>
ææ !
new
ææ" %
{
øø 
Id
¿¿ 
=
¿¿ 
table
¿¿ 
.
¿¿ 
Column
¿¿ %
<
¿¿% &
int
¿¿& )
>
¿¿) *
(
¿¿* +
type
¿¿+ /
:
¿¿/ 0
$str
¿¿1 6
,
¿¿6 7
nullable
¿¿8 @
:
¿¿@ A
false
¿¿B G
)
¿¿G H
.
¡¡ 

Annotation
¡¡ #
(
¡¡# $
$str
¡¡$ 8
,
¡¡8 9
$str
¡¡: @
)
¡¡@ A
,
¡¡A B
Title
¬¬ 
=
¬¬ 
table
¬¬ !
.
¬¬! "
Column
¬¬" (
<
¬¬( )
string
¬¬) /
>
¬¬/ 0
(
¬¬0 1
type
¬¬1 5
:
¬¬5 6
$str
¬¬7 F
,
¬¬F G
nullable
¬¬H P
:
¬¬P Q
true
¬¬R V
)
¬¬V W
,
¬¬W X
ShortDescription
√√ $
=
√√% &
table
√√' ,
.
√√, -
Column
√√- 3
<
√√3 4
string
√√4 :
>
√√: ;
(
√√; <
type
√√< @
:
√√@ A
$str
√√B Q
,
√√Q R
nullable
√√S [
:
√√[ \
true
√√] a
)
√√a b
,
√√b c
Description
ƒƒ 
=
ƒƒ  !
table
ƒƒ" '
.
ƒƒ' (
Column
ƒƒ( .
<
ƒƒ. /
string
ƒƒ/ 5
>
ƒƒ5 6
(
ƒƒ6 7
type
ƒƒ7 ;
:
ƒƒ; <
$str
ƒƒ= L
,
ƒƒL M
nullable
ƒƒN V
:
ƒƒV W
true
ƒƒX \
)
ƒƒ\ ]
,
ƒƒ] ^
ImageUrl
≈≈ 
=
≈≈ 
table
≈≈ $
.
≈≈$ %
Column
≈≈% +
<
≈≈+ ,
string
≈≈, 2
>
≈≈2 3
(
≈≈3 4
type
≈≈4 8
:
≈≈8 9
$str
≈≈: I
,
≈≈I J
nullable
≈≈K S
:
≈≈S T
true
≈≈U Y
)
≈≈Y Z
,
≈≈Z [
Preparation
∆∆ 
=
∆∆  !
table
∆∆" '
.
∆∆' (
Column
∆∆( .
<
∆∆. /
string
∆∆/ 5
>
∆∆5 6
(
∆∆6 7
type
∆∆7 ;
:
∆∆; <
$str
∆∆= L
,
∆∆L M
nullable
∆∆N V
:
∆∆V W
true
∆∆X \
)
∆∆\ ]
,
∆∆] ^

SkillLevel
«« 
=
««  
table
««! &
.
««& '
Column
««' -
<
««- .
string
««. 4
>
««4 5
(
««5 6
type
««6 :
:
««: ;
$str
««< K
,
««K L
nullable
««M U
:
««U V
true
««W [
)
««[ \
,
««\ ]
TimeForCooking
»» "
=
»»# $
table
»»% *
.
»»* +
Column
»»+ 1
<
»»1 2
int
»»2 5
>
»»5 6
(
»»6 7
type
»»7 ;
:
»»; <
$str
»»= B
,
»»B C
nullable
»»D L
:
»»L M
true
»»N R
)
»»R S
,
»»S T
TypeId
…… 
=
…… 
table
…… "
.
……" #
Column
……# )
<
……) *
int
……* -
>
……- .
(
……. /
type
……/ 3
:
……3 4
$str
……5 :
,
……: ;
nullable
……< D
:
……D E
false
……F K
)
……K L
,
……L M
UserId
   
=
   
table
   "
.
  " #
Column
  # )
<
  ) *
string
  * 0
>
  0 1
(
  1 2
type
  2 6
:
  6 7
$str
  8 G
,
  G H
nullable
  I Q
:
  Q R
true
  S W
)
  W X
}
ÀÀ 
,
ÀÀ 
constraints
ÃÃ 
:
ÃÃ 
table
ÃÃ "
=>
ÃÃ# %
{
ÕÕ 
table
ŒŒ 
.
ŒŒ 

PrimaryKey
ŒŒ $
(
ŒŒ$ %
$str
ŒŒ% 1
,
ŒŒ1 2
x
ŒŒ3 4
=>
ŒŒ5 7
x
ŒŒ8 9
.
ŒŒ9 :
Id
ŒŒ: <
)
ŒŒ< =
;
ŒŒ= >
table
œœ 
.
œœ 

ForeignKey
œœ $
(
œœ$ %
name
–– 
:
–– 
$str
–– =
,
––= >
column
—— 
:
—— 
x
——  !
=>
——" $
x
——% &
.
——& '
UserId
——' -
,
——- .
principalTable
““ &
:
““& '
$str
““( 5
,
““5 6
principalColumn
”” '
:
””' (
$str
””) -
)
””- .
;
””. /
table
‘‘ 
.
‘‘ 

ForeignKey
‘‘ $
(
‘‘$ %
name
’’ 
:
’’ 
$str
’’ =
,
’’= >
column
÷÷ 
:
÷÷ 
x
÷÷  !
=>
÷÷" $
x
÷÷% &
.
÷÷& '
TypeId
÷÷' -
,
÷÷- .
principalTable
◊◊ &
:
◊◊& '
$str
◊◊( 5
,
◊◊5 6
principalColumn
ÿÿ '
:
ÿÿ' (
$str
ÿÿ) -
,
ÿÿ- .
onDelete
ŸŸ  
:
ŸŸ  !
ReferentialAction
ŸŸ" 3
.
ŸŸ3 4
Cascade
ŸŸ4 ;
)
ŸŸ; <
;
ŸŸ< =
}
⁄⁄ 
)
⁄⁄ 
;
⁄⁄ 
migrationBuilder
‹‹ 
.
‹‹ 
CreateTable
‹‹ (
(
‹‹( )
name
›› 
:
›› 
$str
›› &
,
››& '
columns
ﬁﬁ 
:
ﬁﬁ 
table
ﬁﬁ 
=>
ﬁﬁ !
new
ﬁﬁ" %
{
ﬂﬂ 

ProductsId
‡‡ 
=
‡‡  
table
‡‡! &
.
‡‡& '
Column
‡‡' -
<
‡‡- .
int
‡‡. 1
>
‡‡1 2
(
‡‡2 3
type
‡‡3 7
:
‡‡7 8
$str
‡‡9 >
,
‡‡> ?
nullable
‡‡@ H
:
‡‡H I
false
‡‡J O
)
‡‡O P
,
‡‡P Q
	RecipesId
·· 
=
·· 
table
··  %
.
··% &
Column
··& ,
<
··, -
int
··- 0
>
··0 1
(
··1 2
type
··2 6
:
··6 7
$str
··8 =
,
··= >
nullable
··? G
:
··G H
false
··I N
)
··N O
}
‚‚ 
,
‚‚ 
constraints
„„ 
:
„„ 
table
„„ "
=>
„„# %
{
‰‰ 
table
ÂÂ 
.
ÂÂ 

PrimaryKey
ÂÂ $
(
ÂÂ$ %
$str
ÂÂ% 8
,
ÂÂ8 9
x
ÂÂ: ;
=>
ÂÂ< >
new
ÂÂ? B
{
ÂÂC D
x
ÂÂE F
.
ÂÂF G

ProductsId
ÂÂG Q
,
ÂÂQ R
x
ÂÂS T
.
ÂÂT U
	RecipesId
ÂÂU ^
}
ÂÂ_ `
)
ÂÂ` a
;
ÂÂa b
table
ÊÊ 
.
ÊÊ 

ForeignKey
ÊÊ $
(
ÊÊ$ %
name
ÁÁ 
:
ÁÁ 
$str
ÁÁ E
,
ÁÁE F
column
ËË 
:
ËË 
x
ËË  !
=>
ËË" $
x
ËË% &
.
ËË& '

ProductsId
ËË' 1
,
ËË1 2
principalTable
ÈÈ &
:
ÈÈ& '
$str
ÈÈ( 2
,
ÈÈ2 3
principalColumn
ÍÍ '
:
ÍÍ' (
$str
ÍÍ) -
,
ÍÍ- .
onDelete
ÎÎ  
:
ÎÎ  !
ReferentialAction
ÎÎ" 3
.
ÎÎ3 4
Cascade
ÎÎ4 ;
)
ÎÎ; <
;
ÎÎ< =
table
ÏÏ 
.
ÏÏ 

ForeignKey
ÏÏ $
(
ÏÏ$ %
name
ÌÌ 
:
ÌÌ 
$str
ÌÌ C
,
ÌÌC D
column
ÓÓ 
:
ÓÓ 
x
ÓÓ  !
=>
ÓÓ" $
x
ÓÓ% &
.
ÓÓ& '
	RecipesId
ÓÓ' 0
,
ÓÓ0 1
principalTable
ÔÔ &
:
ÔÔ& '
$str
ÔÔ( 1
,
ÔÔ1 2
principalColumn
 '
:
' (
$str
) -
,
- .
onDelete
ÒÒ  
:
ÒÒ  !
ReferentialAction
ÒÒ" 3
.
ÒÒ3 4
Cascade
ÒÒ4 ;
)
ÒÒ; <
;
ÒÒ< =
}
ÚÚ 
)
ÚÚ 
;
ÚÚ 
migrationBuilder
ÙÙ 
.
ÙÙ 

InsertData
ÙÙ '
(
ÙÙ' (
table
ıı 
:
ıı 
$str
ıı $
,
ıı$ %
columns
ˆˆ 
:
ˆˆ 
new
ˆˆ 
[
ˆˆ 
]
ˆˆ 
{
ˆˆ  
$str
ˆˆ! %
,
ˆˆ% &
$str
ˆˆ' 9
,
ˆˆ9 :
$str
ˆˆ; A
,
ˆˆA B
$str
ˆˆC S
}
ˆˆT U
,
ˆˆU V
values
˜˜ 
:
˜˜ 
new
˜˜ 
object
˜˜ "
[
˜˜" #
,
˜˜# $
]
˜˜$ %
{
¯¯ 
{
˘˘ 
$str
˘˘ <
,
˘˘< =
$str
˘˘> d
,
˘˘d e
$str
˘˘f m
,
˘˘m n
$str
˘˘o v
}
˘˘w x
,
˘˘x y
{
˙˙ 
$str
˙˙ <
,
˙˙< =
$str
˙˙> d
,
˙˙d e
$str
˙˙f l
,
˙˙l m
$str
˙˙n t
}
˙˙u v
}
˚˚ 
)
˚˚ 
;
˚˚ 
migrationBuilder
˝˝ 
.
˝˝ 

InsertData
˝˝ '
(
˝˝' (
table
˛˛ 
:
˛˛ 
$str
˛˛ $
,
˛˛$ %
columns
ˇˇ 
:
ˇˇ 
new
ˇˇ 
[
ˇˇ 
]
ˇˇ 
{
ˇˇ  
$str
ˇˇ! %
,
ˇˇ% &
$str
ˇˇ' :
,
ˇˇ: ;
$str
ˇˇ< N
,
ˇˇN O
$str
ˇˇP W
,
ˇˇW X
$str
ˇˇY i
,
ˇˇi j
$str
ˇˇk t
,
ˇˇt u
$strˇˇv Ü
,ˇˇÜ á
$strˇˇà î
,ˇˇî ï
$strˇˇñ ß
,ˇˇß ®
$strˇˇ© Ω
,ˇˇΩ æ
$strˇˇø Õ
,ˇˇÕ Œ
$strˇˇœ ‹
,ˇˇ‹ ›
$strˇˇﬁ Ù
,ˇˇÙ ı
$strˇˇˆ Ö
,ˇˇÖ Ü
$strˇˇá ô
,ˇˇô ö
$strˇˇõ •
}ˇˇ¶ ß
,ˇˇß ®
values
ÄÄ 
:
ÄÄ 
new
ÄÄ 
object
ÄÄ "
[
ÄÄ" #
]
ÄÄ# $
{
ÄÄ% &
$str
ÄÄ' M
,
ÄÄM N
$num
ÄÄO P
,
ÄÄP Q
$str
ÄÄR x
,
ÄÄx y
$strÄÄz ã
,ÄÄã å
falseÄÄç í
,ÄÄí ì
nullÄÄî ò
,ÄÄò ô
falseÄÄö ü
,ÄÄü †
nullÄÄ° •
,ÄÄ• ¶
$strÄÄß ∏
,ÄÄ∏ π
$strÄÄ∫ ¡
,ÄÄ¡ ¬
$strÄÄ√ ô
,ÄÄô ö
nullÄÄõ ü
,ÄÄü †
falseÄÄ° ¶
,ÄÄ¶ ß
$strÄÄ® Œ
,ÄÄŒ œ
falseÄÄ– ’
,ÄÄ’ ÷
$strÄÄ◊ ﬁ
}ÄÄﬂ ‡
)ÄÄ‡ ·
;ÄÄ· ‚
migrationBuilder
ÇÇ 
.
ÇÇ 

InsertData
ÇÇ '
(
ÇÇ' (
table
ÉÉ 
:
ÉÉ 
$str
ÉÉ !
,
ÉÉ! "
columns
ÑÑ 
:
ÑÑ 
new
ÑÑ 
[
ÑÑ 
]
ÑÑ 
{
ÑÑ  
$str
ÑÑ! %
,
ÑÑ% &
$str
ÑÑ' 4
}
ÑÑ5 6
,
ÑÑ6 7
values
ÖÖ 
:
ÖÖ 
new
ÖÖ 
object
ÖÖ "
[
ÖÖ" #
,
ÖÖ# $
]
ÖÖ$ %
{
ÜÜ 
{
áá 
$num
áá 
,
áá 
$str
áá  
}
áá! "
,
áá" #
{
àà 
$num
àà 
,
àà 
$str
àà 
}
àà  !
}
ââ 
)
ââ 
;
ââ 
migrationBuilder
ãã 
.
ãã 

InsertData
ãã '
(
ãã' (
table
åå 
:
åå 
$str
åå $
,
åå$ %
columns
çç 
:
çç 
new
çç 
[
çç 
]
çç 
{
çç  
$str
çç! %
,
çç% &
$str
çç' -
}
çç. /
,
çç/ 0
values
éé 
:
éé 
new
éé 
object
éé "
[
éé" #
,
éé# $
]
éé$ %
{
èè 
{
êê 
$num
êê 
,
êê 
$str
êê  
}
êê! "
,
êê" #
{
ëë 
$num
ëë 
,
ëë 
$str
ëë %
}
ëë& '
,
ëë' (
{
íí 
$num
íí 
,
íí 
$str
íí 
}
íí  
}
ìì 
)
ìì 
;
ìì 
migrationBuilder
ïï 
.
ïï 

InsertData
ïï '
(
ïï' (
table
ññ 
:
ññ 
$str
ññ (
,
ññ( )
columns
óó 
:
óó 
new
óó 
[
óó 
]
óó 
{
óó  
$str
óó! )
,
óó) *
$str
óó+ 3
}
óó4 5
,
óó5 6
values
òò 
:
òò 
new
òò 
object
òò "
[
òò" #
]
òò# $
{
òò% &
$str
òò' M
,
òòM N
$str
òòO u
}
òòv w
)
òòw x
;
òòx y
migrationBuilder
öö 
.
öö 
CreateIndex
öö (
(
öö( )
name
õõ 
:
õõ 
$str
õõ 2
,
õõ2 3
table
úú 
:
úú 
$str
úú )
,
úú) *
column
ùù 
:
ùù 
$str
ùù  
)
ùù  !
;
ùù! "
migrationBuilder
üü 
.
üü 
CreateIndex
üü (
(
üü( )
name
†† 
:
†† 
$str
†† %
,
††% &
table
°° 
:
°° 
$str
°° $
,
°°$ %
column
¢¢ 
:
¢¢ 
$str
¢¢ (
,
¢¢( )
unique
££ 
:
££ 
true
££ 
,
££ 
filter
§§ 
:
§§ 
$str
§§ 6
)
§§6 7
;
§§7 8
migrationBuilder
¶¶ 
.
¶¶ 
CreateIndex
¶¶ (
(
¶¶( )
name
ßß 
:
ßß 
$str
ßß 2
,
ßß2 3
table
®® 
:
®® 
$str
®® )
,
®®) *
column
©© 
:
©© 
$str
©©  
)
©©  !
;
©©! "
migrationBuilder
´´ 
.
´´ 
CreateIndex
´´ (
(
´´( )
name
¨¨ 
:
¨¨ 
$str
¨¨ 2
,
¨¨2 3
table
≠≠ 
:
≠≠ 
$str
≠≠ )
,
≠≠) *
column
ÆÆ 
:
ÆÆ 
$str
ÆÆ  
)
ÆÆ  !
;
ÆÆ! "
migrationBuilder
∞∞ 
.
∞∞ 
CreateIndex
∞∞ (
(
∞∞( )
name
±± 
:
±± 
$str
±± 1
,
±±1 2
table
≤≤ 
:
≤≤ 
$str
≤≤ (
,
≤≤( )
column
≥≥ 
:
≥≥ 
$str
≥≥  
)
≥≥  !
;
≥≥! "
migrationBuilder
µµ 
.
µµ 
CreateIndex
µµ (
(
µµ( )
name
∂∂ 
:
∂∂ 
$str
∂∂ "
,
∂∂" #
table
∑∑ 
:
∑∑ 
$str
∑∑ $
,
∑∑$ %
column
∏∏ 
:
∏∏ 
$str
∏∏ )
)
∏∏) *
;
∏∏* +
migrationBuilder
∫∫ 
.
∫∫ 
CreateIndex
∫∫ (
(
∫∫( )
name
ªª 
:
ªª 
$str
ªª %
,
ªª% &
table
ºº 
:
ºº 
$str
ºº $
,
ºº$ %
column
ΩΩ 
:
ΩΩ 
$str
ΩΩ ,
,
ΩΩ, -
unique
ææ 
:
ææ 
true
ææ 
,
ææ 
filter
øø 
:
øø 
$str
øø :
)
øø: ;
;
øø; <
migrationBuilder
¡¡ 
.
¡¡ 
CreateIndex
¡¡ (
(
¡¡( )
name
¬¬ 
:
¬¬ 
$str
¬¬ 3
,
¬¬3 4
table
√√ 
:
√√ 
$str
√√ '
,
√√' (
column
ƒƒ 
:
ƒƒ 
$str
ƒƒ #
)
ƒƒ# $
;
ƒƒ$ %
migrationBuilder
∆∆ 
.
∆∆ 
CreateIndex
∆∆ (
(
∆∆( )
name
«« 
:
«« 
$str
«« )
,
««) *
table
»» 
:
»» 
$str
»»  
,
»»  !
column
…… 
:
…… 
$str
……  
)
……  !
;
……! "
migrationBuilder
ÀÀ 
.
ÀÀ 
CreateIndex
ÀÀ (
(
ÀÀ( )
name
ÃÃ 
:
ÃÃ 
$str
ÃÃ )
,
ÃÃ) *
table
ÕÕ 
:
ÕÕ 
$str
ÕÕ  
,
ÕÕ  !
column
ŒŒ 
:
ŒŒ 
$str
ŒŒ  
)
ŒŒ  !
;
ŒŒ! "
}
œœ 	
	protected
““ 
override
““ 
void
““ 
Down
““  $
(
““$ %
MigrationBuilder
““% 5
migrationBuilder
““6 F
)
““F G
{
”” 	
migrationBuilder
‘‘ 
.
‘‘ 
	DropTable
‘‘ &
(
‘‘& '
name
’’ 
:
’’ 
$str
’’ (
)
’’( )
;
’’) *
migrationBuilder
◊◊ 
.
◊◊ 
	DropTable
◊◊ &
(
◊◊& '
name
ÿÿ 
:
ÿÿ 
$str
ÿÿ (
)
ÿÿ( )
;
ÿÿ) *
migrationBuilder
⁄⁄ 
.
⁄⁄ 
	DropTable
⁄⁄ &
(
⁄⁄& '
name
€€ 
:
€€ 
$str
€€ (
)
€€( )
;
€€) *
migrationBuilder
›› 
.
›› 
	DropTable
›› &
(
››& '
name
ﬁﬁ 
:
ﬁﬁ 
$str
ﬁﬁ '
)
ﬁﬁ' (
;
ﬁﬁ( )
migrationBuilder
‡‡ 
.
‡‡ 
	DropTable
‡‡ &
(
‡‡& '
name
·· 
:
·· 
$str
·· (
)
··( )
;
··) *
migrationBuilder
„„ 
.
„„ 
	DropTable
„„ &
(
„„& '
name
‰‰ 
:
‰‰ 
$str
‰‰ &
)
‰‰& '
;
‰‰' (
migrationBuilder
ÊÊ 
.
ÊÊ 
	DropTable
ÊÊ &
(
ÊÊ& '
name
ÁÁ 
:
ÁÁ 
$str
ÁÁ #
)
ÁÁ# $
;
ÁÁ$ %
migrationBuilder
ÈÈ 
.
ÈÈ 
	DropTable
ÈÈ &
(
ÈÈ& '
name
ÍÍ 
:
ÍÍ 
$str
ÍÍ  
)
ÍÍ  !
;
ÍÍ! "
migrationBuilder
ÏÏ 
.
ÏÏ 
	DropTable
ÏÏ &
(
ÏÏ& '
name
ÌÌ 
:
ÌÌ 
$str
ÌÌ 
)
ÌÌ  
;
ÌÌ  !
migrationBuilder
ÔÔ 
.
ÔÔ 
	DropTable
ÔÔ &
(
ÔÔ& '
name
 
:
 
$str
 #
)
# $
;
$ %
migrationBuilder
ÚÚ 
.
ÚÚ 
	DropTable
ÚÚ &
(
ÚÚ& '
name
ÛÛ 
:
ÛÛ 
$str
ÛÛ #
)
ÛÛ# $
;
ÛÛ$ %
}
ÙÙ 	
}
ıı 
}ˆˆ ‡X
\C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Data\ApplicationDbContext.cs
	namespace 	
Recipe
 
. 
Data 
{ 
public 

class  
ApplicationDbContext %
:& '
IdentityDbContext( 9
<9 :
ApplicationUser: I
>I J
{		 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
:T U
baseV Z
(Z [
options[ b
)b c
{ 	
} 	
public 
DbSet 
< 
Recipee 
> 
Recipes %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DbSet 
< 
Product 
> 
Products &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DbSet 
< 

RecipeType 
>  
RecipeTypes! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
UserFavoriteRecipe '
>' (
UserFavoriteRecipes) <
{= >
get? B
;B C
setD G
;G H
}I J
public 
DbSet 
< 
UserRecipeRating %
>% &
UserRecipeRatings' 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
DbSet 
< 
Comment 
> 
Comments &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
builder= D
)D E
{ 	
base 
. 
OnModelCreating  
(  !
builder! (
)( )
;) *
builder 
. 
Entity 
< 
UserFavoriteRecipe -
>- .
(. /
)/ 0
. 
HasKey 
( 
ufr 
=> 
new "
{# $
ufr% (
.( )
UserId) /
,/ 0
ufr1 4
.4 5
	RecipeeId5 >
}? @
)@ A
;A B
builder 
. 
Entity 
< 
UserFavoriteRecipe -
>- .
(. /
)/ 0
. 
HasOne 
( 
ufr 
=> 
ufr "
." #
User# '
)' (
. 
WithMany 
( 
u 
=> 
u  
.  !
FavoriteRecipes! 0
)0 1
. 
HasForeignKey 
( 
ufr "
=># %
ufr& )
.) *
UserId* 0
)0 1
;1 2
builder!! 
.!! 
Entity!! 
<!! 
UserFavoriteRecipe!! -
>!!- .
(!!. /
)!!/ 0
."" 
HasOne"" 
("" 
ufr"" 
=>"" 
ufr"" "
.""" #
Recipee""# *
)""* +
.## 
WithMany## 
(## 
r## 
=>## 
r##  
.##  !
UserFavorites##! .
)##. /
.$$ 
HasForeignKey$$ 
($$ 
ufr$$ "
=>$$# %
ufr$$& )
.$$) *
	RecipeeId$$* 3
)$$3 4
;$$4 5
builder&& 
.&& 
Entity&& 
<&& 
UserRecipeRating&& +
>&&+ ,
(&&, -
)&&- .
.'' 
HasKey'' 
('' 
ur'' 
=>'' 
new''  
{''! "
ur''# %
.''% &
UserId''& ,
,'', -
ur''. 0
.''0 1
	RecipeeId''1 :
}''; <
)''< =
;''= >
builder)) 
.)) 
Entity)) 
<)) 
UserRecipeRating)) +
>))+ ,
()), -
)))- .
.** 
HasOne** 
(** 
ur** 
=>** 
ur**  
.**  !
User**! %
)**% &
.++ 
WithMany++ 
(++ 
u++ 
=>++ 
u++  
.++  !
RecipeRatings++! .
)++. /
.,, 
HasForeignKey,, 
(,, 
ur,, !
=>,," $
ur,,% '
.,,' (
UserId,,( .
),,. /
;,,/ 0
builder.. 
... 
Entity.. 
<.. 
UserRecipeRating.. +
>..+ ,
(.., -
)..- .
.// 
HasOne// 
(// 
ur// 
=>// 
ur//  
.//  !
Recipee//! (
)//( )
.00 
WithMany00 
(00 
r00 
=>00 
r00  
.00  !
UserRatings00! ,
)00, -
.11 
HasForeignKey11 
(11 
ur11 !
=>11" $
ur11% '
.11' (
	RecipeeId11( 1
)111 2
;112 3
builder33 
.33 
Entity33 
<33 
Comment33 "
>33" #
(33# $
)33$ %
.44 
HasOne44 
(44 
c44 
=>44 
c44 
.44 
Recipe44 $
)44$ %
.55 
WithMany55 
(55 
r55 
=>55 
r55 
.55  
Comments55  (
)55( )
.66 
HasForeignKey66 
(66 
c66 
=>66  "
c66# $
.66$ %
RecipeId66% -
)66- .
;66. /
builder88 
.88 
Entity88 
<88 

RecipeType88 %
>88% &
(88& '
)88' (
.88( )
HasData88) 0
(880 1
new99 

RecipeType99 
{99  
Id99! #
=99$ %
$num99& '
,99' (
Type99) -
=99. /
$str990 7
}998 9
,999 :
new:: 

RecipeType:: 
{::  
Id::! #
=::$ %
$num::& '
,::' (
Type::) -
=::. /
$str::0 <
}::= >
,::> ?
new;; 

RecipeType;; 
{;;  
Id;;! #
=;;$ %
$num;;& '
,;;' (
Type;;) -
=;;. /
$str;;0 5
};;6 7
)<< 
;<< 
builder== 
.== 
Entity== 
<== 
Product== "
>==" #
(==# $
)==$ %
.==% &
HasData==& -
(==- .
new>> 
Product>> 
{>> 
Id>>  
=>>! "
$num>># $
,>>$ %
ProductName>>& 1
=>>2 3
$str>>4 ;
}>>< =
,>>= >
new?? 
Product?? 
{?? 
Id??  
=??! "
$num??# $
,??$ %
ProductName??& 1
=??2 3
$str??4 :
}??; <
)@@ 
;@@ 
varAA 

userRoleIdAA 
=AA 
$strAA C
;AAC D
varBB 
adminRoleIdBB 
=BB 
$strBB D
;BBD E
varCC 
rolesCC 
=CC 
newCC 
ListCC  
<CC  !
IdentityRoleCC! -
>CC- .
{DD 
newEE 
IdentityRoleEE  
(EE  !
)EE! "
{FF 
IdGG 
=GG 

userRoleIdGG #
,GG# $
NameHH 
=HH 
$strHH !
,HH! "
NormalizedNameII "
=II# $
$strII% +
.II+ ,
ToUpperII, 3
(II3 4
)II4 5
,II5 6
ConcurrencyStampJJ $
=JJ% &

userRoleIdJJ' 1
}KK 
,KK 
newLL 
IdentityRoleLL  
(LL  !
)LL! "
{MM 
IdNN 
=NN 
adminRoleIdNN $
,NN$ %
NameOO 
=OO 
$strOO "
,OO" #
NormalizedNamePP "
=PP# $
$strPP% ,
.PP, -
ToUpperPP- 4
(PP4 5
)PP5 6
,PP6 7
ConcurrencyStampQQ $
=QQ% &
adminRoleIdQQ' 2
}RR 
}SS 
;SS 
builderUU 
.UU 
EntityUU 
<UU 
IdentityRoleUU '
>UU' (
(UU( )
)UU) *
.UU* +
HasDataUU+ 2
(UU2 3
rolesUU3 8
)UU8 9
;UU9 :
varWW 
adminUserIdWW 
=WW 
$strWW D
;WWD E
varXX 
adminXX 
=XX 
newXX 
ApplicationUserXX +
(XX+ ,
)XX, -
{YY 
IdZZ 
=ZZ 
adminUserIdZZ  
,ZZ  !
UserName[[ 
=[[ 
$str[[ "
,[[" #
Email\\ 
=\\ 
$str\\ )
,\\) *
NormalizedEmail]] 
=]]  !
$str]]" 3
.]]3 4
ToUpper]]4 ;
(]]; <
)]]< =
,]]= >
NormalizedUserName^^ "
=^^# $
$str^^% ,
.^^, -
ToUpper^^- 4
(^^4 5
)^^5 6
}__ 
;__ 
admin`` 
.`` 
PasswordHash`` 
=``  
new``! $
PasswordHasher``% 3
<``3 4
ApplicationUser``4 C
>``C D
(``D E
)``E F
.``F G
HashPassword``G S
(``S T
admin``T Y
,``Y Z
$str``[ f
)``f g
;``g h
builderaa 
.aa 
Entityaa 
<aa 
ApplicationUseraa *
>aa* +
(aa+ ,
)aa, -
.aa- .
HasDataaa. 5
(aa5 6
adminaa6 ;
)aa; <
;aa< =
varbb 

adminRolesbb 
=bb 
newbb  
Listbb! %
<bb% &
IdentityUserRolebb& 6
<bb6 7
stringbb7 =
>bb= >
>bb> ?
(bb? @
)bb@ A
{cc 
newdd 
(dd 
)dd 
{ee 
UserIdff 
=ff 
adminUserIdff (
,ff( )
RoleIdgg 
=gg 
adminRoleIdgg (
,gg( )
}hh 
}ii 
;ii 
builderjj 
.jj 
Entityjj 
<jj 
IdentityUserRolejj +
<jj+ ,
stringjj, 2
>jj2 3
>jj3 4
(jj4 5
)jj5 6
.jj6 7
HasDatajj7 >
(jj> ?

adminRolesjj? I
)jjI J
;jjJ K
}kk 	
}mm 
}nn ≤ß
]C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Controllers\UserController.cs
	namespace 	
Recipe
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
UserController 
:  !
ControllerBase" 0
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
ITokenRepository )
_tokenRepository* :
;: ;
private 
readonly 
IRecipeRepository *
_recipeRepository+ <
;< =
public 
UserController 
( 
UserManager )
<) *
ApplicationUser* 9
>9 :
userManager; F
,F G
SignInManagerH U
<U V
ApplicationUserV e
>e f
signInManagerg t
,t u
ITokenRepository	v Ü
tokenRepository
á ñ
,
ñ ó
IRecipeRepository
ò ©
recipeRepository
™ ∫
)
∫ ª
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
_tokenRepository   
=   
tokenRepository   .
;  . /
_recipeRepository!! 
=!! 
recipeRepository!!  0
;!!0 1
}"" 	
[$$ 	
HttpPost$$	 
]$$ 
[%% 	
Route%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
Register&&) 1
(&&1 2
[&&2 3
FromBody&&3 ;
]&&; <
RegisterRequestDTO&&= O
model&&P U
)&&U V
{'' 	
if(( 
((( 

ModelState(( 
.(( 
IsValid(( "
)((" #
{)) 
var** 
existingUser**  
=**! "
await**# (
_userManager**) 5
.**5 6
FindByEmailAsync**6 F
(**F G
model**G L
.**L M
Email**M R
)**R S
;**S T
if++ 
(++ 
existingUser++  
!=++! #
null++$ (
)++( )
{,, 

ModelState-- 
.-- 
AddModelError-- ,
(--, -
$str--- 4
,--4 5
$str--6 T
)--T U
;--U V
return.. 

BadRequest.. %
(..% &

ModelState..& 0
)..0 1
;..1 2
}// 
var11 
user11 
=11 
new11 
ApplicationUser11 .
{22 
UserName33 
=33 
model33 $
.33$ %
Username33% -
,33- .
Email44 
=44 
model44 !
.44! "
Email44" '
,44' (
IsAdmin55 
=55 
false55 #
}66 
;66 
var88 
result88 
=88 
await88 "
_userManager88# /
.88/ 0
CreateAsync880 ;
(88; <
user88< @
,88@ A
model88B G
.88G H
Password88H P
)88P Q
;88Q R
if99 
(99 
result99 
.99 
	Succeeded99 $
)99$ %
{:: 
await;; 
_userManager;; &
.;;& '
AddToRoleAsync;;' 5
(;;5 6
user;;6 :
,;;: ;
$str;;< B
);;B C
;;;C D
await<< 
_signInManager<< (
.<<( )
SignInAsync<<) 4
(<<4 5
user<<5 9
,<<9 :
isPersistent<<; G
:<<G H
false<<I N
)<<N O
;<<O P
return== 
Ok== 
(== 
$str== 8
)==8 9
;==9 :
}>> 
else?? 
{@@ 
foreachAA 
(AA 
varAA  
errorAA! &
inAA' )
resultAA* 0
.AA0 1
ErrorsAA1 7
)AA7 8
{BB 

ModelStateCC "
.CC" #
AddModelErrorCC# 0
(CC0 1
stringCC1 7
.CC7 8
EmptyCC8 =
,CC= >
errorCC? D
.CCD E
DescriptionCCE P
)CCP Q
;CCQ R
}DD 
returnEE 

BadRequestEE %
(EE% &

ModelStateEE& 0
)EE0 1
;EE1 2
}FF 
}GG 
returnHH 

BadRequestHH 
(HH 
$strHH 4
)HH4 5
;HH5 6
}II 	
[KK 	
HttpPostKK	 
]KK 
[LL 	
RouteLL	 
(LL 
$strLL 
)LL 
]LL 
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
LoginMM) .
(MM. /
[MM/ 0
FromBodyMM0 8
]MM8 9
LoginRequestDTOMM: I
modelMMJ O
)MMO P
{NN 	
ifOO 
(OO 

ModelStateOO 
.OO 
IsValidOO "
)OO" #
{PP 
varQQ 
userQQ 
=QQ 
awaitQQ  
_userManagerQQ! -
.QQ- .
FindByEmailAsyncQQ. >
(QQ> ?
modelQQ? D
.QQD E

IdentifierQQE O
)QQO P
;QQP Q
ifRR 
(RR 
userRR 
==RR 
nullRR  
)RR  !
{SS 
userTT 
=TT 
awaitTT  
_userManagerTT! -
.TT- .
FindByNameAsyncTT. =
(TT= >
modelTT> C
.TTC D

IdentifierTTD N
)TTN O
;TTO P
}UU 
ifWW 
(WW 
userWW 
!=WW 
nullWW  
)WW  !
{XX 
varYY 
resultYY 
=YY  
awaitYY! &
_signInManagerYY' 5
.YY5 6
PasswordSignInAsyncYY6 I
(YYI J
userYYJ N
.YYN O
UserNameYYO W
,YYW X
modelYYY ^
.YY^ _
PasswordYY_ g
,YYg h
isPersistentYYi u
:YYu v
falseYYw |
,YY| }
lockoutOnFailure	YY~ é
:
YYé è
false
YYê ï
)
YYï ñ
;
YYñ ó
ifZZ 
(ZZ 
resultZZ 
.ZZ 
	SucceededZZ (
)ZZ( )
{[[ 
var\\ 
roles\\ !
=\\" #
await\\$ )
_userManager\\* 6
.\\6 7
GetRolesAsync\\7 D
(\\D E
user\\E I
)\\I J
;\\J K
var^^ 
jwtToken^^ $
=^^% &
_tokenRepository^^' 7
.^^7 8
CreateJwtToken^^8 F
(^^F G
user^^G K
,^^K L
roles^^M R
.^^R S
ToList^^S Y
(^^Y Z
)^^Z [
)^^[ \
;^^\ ]
var__ 
response__ $
=__% &
new__' *
LoginResponseDTO__+ ;
{`` 
Usernameaa $
=aa% &
useraa' +
.aa+ ,
UserNameaa, 4
,aa4 5
Emailbb !
=bb" #
userbb$ (
.bb( )
Emailbb) .
,bb. /
Rolescc !
=cc" #
rolescc$ )
.cc) *
ToListcc* 0
(cc0 1
)cc1 2
,cc2 3
Tokendd !
=dd" #
jwtTokendd$ ,
,dd, -
UserIdee "
=ee# $
useree% )
.ee) *
Idee* ,
}ff 
;ff 
returngg 
Okgg !
(gg! "
responsegg" *
)gg* +
;gg+ ,
}hh 
}ii 

ModelStatekk 
.kk 
AddModelErrorkk (
(kk( )
stringkk) /
.kk/ 0
Emptykk0 5
,kk5 6
$strkk7 O
)kkO P
;kkP Q
returnll 

BadRequestll !
(ll! "

ModelStatell" ,
)ll, -
;ll- .
}mm 
returnnn 

BadRequestnn 
(nn 
$strnn 4
)nn4 5
;nn5 6
}oo 	
[qq 	
HttpGetqq	 
]qq 
[rr 	
Routerr	 
(rr 
$strrr #
)rr# $
]rr$ %
publicss 
asyncss 
Taskss 
<ss 
IActionResultss '
>ss' (
CheckRegistrationss) :
(ss: ;
[ss; <
	FromQueryss< E
]ssE F
stringssG M
emailssN S
)ssS T
{tt 	
varuu 
useruu 
=uu 
awaituu 
_userManageruu )
.uu) *
FindByEmailAsyncuu* :
(uu: ;
emailuu; @
)uu@ A
;uuA B
ifvv 
(vv 
uservv 
!=vv 
nullvv 
)vv 
{ww 
returnxx 
Okxx 
(xx 
$strxx /
)xx/ 0
;xx0 1
}yy 
returnzz 
NotFoundzz 
(zz 
$strzz 5
)zz5 6
;zz6 7
}{{ 	
[}} 	
HttpPost}}	 
(}} 
$str}} 7
)}}7 8
]}}8 9
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
AddFavorite~~) 4
(~~4 5
string~~5 ;
userId~~< B
,~~B C
int~~D G
recipeId~~H P
)~~P Q
{ 	
var
ÅÅ 
recipe
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_recipeRepository
ÅÅ 0
.
ÅÅ0 1
GetByIdAsync
ÅÅ1 =
(
ÅÅ= >
recipeId
ÅÅ> F
)
ÅÅF G
;
ÅÅG H
if
ÇÇ 
(
ÇÇ 
recipe
ÇÇ 
==
ÇÇ 
null
ÇÇ 
)
ÇÇ 
{
ÉÉ 
return
ÑÑ 
NotFound
ÑÑ 
(
ÑÑ  
$str
ÑÑ  3
)
ÑÑ3 4
;
ÑÑ4 5
}
ÖÖ 
await
áá 
_recipeRepository
áá #
.
áá# $'
AddRecipeToFavoritesAsync
áá$ =
(
áá= >
userId
áá> D
,
ááD E
recipeId
ááF N
)
ááN O
;
ááO P
return
ââ 
Ok
ââ 
(
ââ 
$str
ââ 1
)
ââ1 2
;
ââ2 3
}
ää 	
[
åå 	

HttpDelete
åå	 
(
åå 
$str
åå 9
)
åå9 :
]
åå: ;
public
çç 
async
çç 
Task
çç 
<
çç 
IActionResult
çç '
>
çç' (
RemoveFavorite
çç) 7
(
çç7 8
string
çç8 >
userId
çç? E
,
ççE F
int
ççG J
recipeId
ççK S
)
ççS T
{
éé 	
await
èè 
_recipeRepository
èè #
.
èè# $,
RemoveRecipeFromFavoritesAsync
èè$ B
(
èèB C
userId
èèC I
,
èèI J
recipeId
èèK S
)
èèS T
;
èèT U
return
ëë 
Ok
ëë 
(
ëë 
$str
ëë 5
)
ëë5 6
;
ëë6 7
}
íí 	
[
îî 	
HttpGet
îî	 
(
îî 
$str
îî +
)
îî+ ,
]
îî, -
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
IActionResult
ïï '
>
ïï' (
GetAllFavorites
ïï) 8
(
ïï8 9
string
ïï9 ?
userId
ïï@ F
)
ïïF G
{
ññ 	
var
òò 
favoriteRecipes
òò 
=
òò  !
await
òò" '
_recipeRepository
òò( 9
.
òò9 :,
GetFavoriteRecipesForUserAsync
òò: X
(
òòX Y
userId
òòY _
)
òò_ `
;
òò` a
var
úú 
response
úú 
=
úú 
favoriteRecipes
úú *
.
úú* +
Select
úú+ 1
(
úú1 2
recipe
úú2 8
=>
úú9 ;
new
úú< ?
	RecipeDTO
úú@ I
{
ùù 
Id
ûû 
=
ûû 
recipe
ûû 
.
ûû 
Id
ûû 
,
ûû 
Title
üü 
=
üü 
recipe
üü 
.
üü 
Title
üü $
,
üü$ %
ShortDescription
††  
=
††! "
recipe
††# )
.
††) *
ShortDescription
††* :
,
††: ;
Description
°° 
=
°° 
recipe
°° $
.
°°$ %
Description
°°% 0
,
°°0 1
ImageUrl
¢¢ 
=
¢¢ 
recipe
¢¢ !
.
¢¢! "
ImageUrl
¢¢" *
,
¢¢* +
Preparation
££ 
=
££ 
recipe
££ $
.
££$ %
Preparation
££% 0
,
££0 1

SkillLevel
§§ 
=
§§ 
recipe
§§ #
.
§§# $

SkillLevel
§§$ .
,
§§. /
TimeForCooking
•• 
=
••  
recipe
••! '
.
••' (
TimeForCooking
••( 6
,
••6 7
Type
¶¶ 
=
¶¶ 
new
¶¶ 

RecipeType
¶¶ %
{
ßß 
Id
®® 
=
®® 
recipe
®® 
.
®®  
Type
®®  $
.
®®$ %
Id
®®% '
,
®®' (
Type
©© 
=
©© 
recipe
©© !
.
©©! "
Type
©©" &
.
©©& '
Type
©©' +
}
™™ 
,
™™ 
Products
´´ 
=
´´ 
recipe
´´ !
.
´´! "
Products
´´" *
.
´´* +
Select
´´+ 1
(
´´1 2
x
´´2 3
=>
´´4 6
new
´´7 :

ProductDTO
´´; E
{
¨¨ 
Id
≠≠ 
=
≠≠ 
x
≠≠ 
.
≠≠ 
Id
≠≠ 
,
≠≠ 
ProductName
ÆÆ 
=
ÆÆ  !
x
ÆÆ" #
.
ÆÆ# $
ProductName
ÆÆ$ /
}
ØØ 
)
ØØ 
.
ØØ 
ToList
ØØ 
(
ØØ 
)
ØØ 
,
ØØ #
RecipeCreatorUserName
∞∞ %
=
∞∞& '
recipe
∞∞( .
.
∞∞. /
User
∞∞/ 3
.
∞∞3 4
UserName
∞∞4 <
,
∞∞< =
}
±± 
)
±± 
;
±± 
return
≥≥ 
Ok
≥≥ 
(
≥≥ 
response
≥≥ 
)
≥≥ 
;
≥≥  
}
µµ 	
[
∂∂ 	
HttpPost
∂∂	 
]
∂∂ 
[
∑∑ 	
Route
∑∑	 
(
∑∑ 
$str
∑∑ 
)
∑∑ 
]
∑∑ 
public
∏∏ 
async
∏∏ 
Task
∏∏ 
<
∏∏ 
IActionResult
∏∏ '
>
∏∏' (
ChangePassword
∏∏) 7
(
∏∏7 8
[
∏∏8 9
FromBody
∏∏9 A
]
∏∏A B
ChangePasswordDTO
∏∏C T
model
∏∏U Z
)
∏∏Z [
{
ππ 	
if
∫∫ 
(
∫∫ 

ModelState
∫∫ 
.
∫∫ 
IsValid
∫∫ "
)
∫∫" #
{
ªª 
var
ºº 
user
ºº 
=
ºº 
await
ºº  
_userManager
ºº! -
.
ºº- .
FindByEmailAsync
ºº. >
(
ºº> ?
model
ºº? D
.
ººD E
	UserEmail
ººE N
)
ººN O
;
ººO P
if
ΩΩ 
(
ΩΩ 
user
ΩΩ 
==
ΩΩ 
null
ΩΩ  
)
ΩΩ  !
{
ææ 
return
øø 

BadRequest
øø %
(
øø% &
$str
øø& 7
)
øø7 8
;
øø8 9
}
¿¿ 
var
√√ 
result
√√ 
=
√√ 
await
√√ "
_userManager
√√# /
.
√√/ 0!
ChangePasswordAsync
√√0 C
(
√√C D
user
√√D H
,
√√H I
model
√√J O
.
√√O P
OldPassword
√√P [
,
√√[ \
model
√√] b
.
√√b c
NewPassword
√√c n
)
√√n o
;
√√o p
if
ƒƒ 
(
ƒƒ 
result
ƒƒ 
.
ƒƒ 
	Succeeded
ƒƒ $
)
ƒƒ$ %
{
≈≈ 
return
∆∆ 
Ok
∆∆ 
(
∆∆ 
$str
∆∆ >
)
∆∆> ?
;
∆∆? @
}
«« 
else
»» 
{
…… 
foreach
   
(
   
var
    
error
  ! &
in
  ' )
result
  * 0
.
  0 1
Errors
  1 7
)
  7 8
{
ÀÀ 

ModelState
ÃÃ "
.
ÃÃ" #
AddModelError
ÃÃ# 0
(
ÃÃ0 1
string
ÃÃ1 7
.
ÃÃ7 8
Empty
ÃÃ8 =
,
ÃÃ= >
error
ÃÃ? D
.
ÃÃD E
Description
ÃÃE P
)
ÃÃP Q
;
ÃÃQ R
}
ÕÕ 
return
ŒŒ 

BadRequest
ŒŒ %
(
ŒŒ% &

ModelState
ŒŒ& 0
)
ŒŒ0 1
;
ŒŒ1 2
}
œœ 
}
–– 
return
—— 

BadRequest
—— 
(
—— 
$str
—— 4
)
——4 5
;
——5 6
}
““ 	
[
”” 	
HttpPost
””	 
]
”” 
[
‘‘ 	
Route
‘‘	 
(
‘‘ 
$str
‘‘  
)
‘‘  !
]
‘‘! "
public
’’ 
async
’’ 
Task
’’ 
<
’’ 
IActionResult
’’ '
>
’’' (
AddDescription
’’) 7
(
’’7 8
[
’’8 9
FromBody
’’9 A
]
’’A B 
UserDescriptionDTO
’’C U
model
’’V [
)
’’[ \
{
÷÷ 	
if
◊◊ 
(
◊◊ 

ModelState
◊◊ 
.
◊◊ 
IsValid
◊◊ "
)
◊◊" #
{
ÿÿ 
var
ŸŸ 
user
ŸŸ 
=
ŸŸ 
await
ŸŸ  
_userManager
ŸŸ! -
.
ŸŸ- .
FindByEmailAsync
ŸŸ. >
(
ŸŸ> ?
model
ŸŸ? D
.
ŸŸD E
Email
ŸŸE J
)
ŸŸJ K
;
ŸŸK L
if
⁄⁄ 
(
⁄⁄ 
user
⁄⁄ 
==
⁄⁄ 
null
⁄⁄  
)
⁄⁄  !
{
€€ 
return
‹‹ 
NotFound
‹‹ #
(
‹‹# $
$str
‹‹$ 5
)
‹‹5 6
;
‹‹6 7
}
›› 
user
ﬂﬂ 
.
ﬂﬂ 
UserDescription
ﬂﬂ $
=
ﬂﬂ% &
model
ﬂﬂ' ,
.
ﬂﬂ, -
UserDescription
ﬂﬂ- <
;
ﬂﬂ< =
var
‡‡ 
result
‡‡ 
=
‡‡ 
await
‡‡ "
_userManager
‡‡# /
.
‡‡/ 0
UpdateAsync
‡‡0 ;
(
‡‡; <
user
‡‡< @
)
‡‡@ A
;
‡‡A B
if
‚‚ 
(
‚‚ 
result
‚‚ 
.
‚‚ 
	Succeeded
‚‚ $
)
‚‚$ %
{
„„ 
return
‰‰ 
Ok
‰‰ 
(
‰‰ 
$str
‰‰ ?
)
‰‰? @
;
‰‰@ A
}
ÂÂ 
else
ÊÊ 
{
ÁÁ 
foreach
ËË 
(
ËË 
var
ËË  
error
ËË! &
in
ËË' )
result
ËË* 0
.
ËË0 1
Errors
ËË1 7
)
ËË7 8
{
ÈÈ 

ModelState
ÍÍ "
.
ÍÍ" #
AddModelError
ÍÍ# 0
(
ÍÍ0 1
string
ÍÍ1 7
.
ÍÍ7 8
Empty
ÍÍ8 =
,
ÍÍ= >
error
ÍÍ? D
.
ÍÍD E
Description
ÍÍE P
)
ÍÍP Q
;
ÍÍQ R
}
ÎÎ 
return
ÏÏ 

BadRequest
ÏÏ %
(
ÏÏ% &

ModelState
ÏÏ& 0
)
ÏÏ0 1
;
ÏÏ1 2
}
ÌÌ 
}
ÓÓ 
return
ÔÔ 

BadRequest
ÔÔ 
(
ÔÔ 
$str
ÔÔ 4
)
ÔÔ4 5
;
ÔÔ5 6
}
 	
[
ÚÚ 	
HttpGet
ÚÚ	 
]
ÚÚ 
[
ÛÛ 	
Route
ÛÛ	 
(
ÛÛ 
$str
ÛÛ  
)
ÛÛ  !
]
ÛÛ! "
public
ÙÙ 
async
ÙÙ 
Task
ÙÙ 
<
ÙÙ 
IActionResult
ÙÙ '
>
ÙÙ' (
GetDescription
ÙÙ) 7
(
ÙÙ7 8
[
ÙÙ8 9
	FromQuery
ÙÙ9 B
]
ÙÙB C
string
ÙÙD J
email
ÙÙK P
)
ÙÙP Q
{
ıı 	
var
ˆˆ 
user
ˆˆ 
=
ˆˆ 
await
ˆˆ 
_userManager
ˆˆ )
.
ˆˆ) *
FindByEmailAsync
ˆˆ* :
(
ˆˆ: ;
email
ˆˆ; @
)
ˆˆ@ A
;
ˆˆA B
if
˜˜ 
(
˜˜ 
user
˜˜ 
==
˜˜ 
null
˜˜ 
)
˜˜ 
{
¯¯ 
return
˘˘ 
NotFound
˘˘ 
(
˘˘  
$str
˘˘  1
)
˘˘1 2
;
˘˘2 3
}
˙˙ 
return
¸¸ 
Ok
¸¸ 
(
¸¸ 
new
¸¸ 
{
¸¸ 
UserDescription
¸¸ +
=
¸¸, -
user
¸¸. 2
.
¸¸2 3
UserDescription
¸¸3 B
}
¸¸C D
)
¸¸D E
;
¸¸E F
}
˝˝ 	
}
˛˛ 
}ˇˇ ﬂ
cC:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Controllers\RecipeTypeController.cs
	namespace 	
Recipe
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class  
RecipeTypeController %
:& '
ControllerBase( 6
{ 
private 
readonly !
IRecipeTypeRepository .!
_recipeTypeRepository/ D
;D E
public  
RecipeTypeController #
(# $!
IRecipeTypeRepository$ 9

recipeType: D
)D E
{ 	!
_recipeTypeRepository !
=" #

recipeType$ .
;. /
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IActionResult '
>' ("
GetAllRecipeTypesAsync) ?
(? @
)@ A
{ 	
var 
recipeTypes 
= 
await #!
_recipeTypeRepository$ 9
.9 :
GetAllTypes: E
(E F
)F G
;G H
var 
response 
= 
new 
List #
<# $
RecipeTypeDTO$ 1
>1 2
(2 3
)3 4
;4 5
if 
( 
recipeTypes 
== 
null #
)# $
{ 
return 
Ok 
( 
recipeTypes %
)% &
;& '
} 
foreach 
( 
var 
type 
in  
recipeTypes! ,
), -
{   
response!! 
.!! 
Add!! 
(!! 
new!!  
RecipeTypeDTO!!! .
{"" 
Id## 
=## 
type## 
.## 
Id##  
,##  !
Type$$ 
=$$ 
type$$ 
.$$  
Type$$  $
}%% 
)%% 
;%% 
}&& 
return'' 
Ok'' 
('' 
response'' 
)'' 
;''  
}(( 	
})) 
}** úÑ
_C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Controllers\RecipeController.cs
	namespace 	
Recipe
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
RecipeController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IRecipeRepository *
_recipeRepository+ <
;< =
private 
readonly 
IProductRepository +
_productRepository, >
;> ?
private 
readonly !
IRecipeTypeRepository .!
_recipeTypeRepository/ D
;D E
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
public 
RecipeController 
(  
IRecipeRepository  1
recipeRepository2 B
,B C
IProductRepositoryD V
productRepoW b
,b c!
IRecipeTypeRepositoryd y!
recipeTypeRepository	z é
,
é è
UserManager
ê õ
<
õ ú
ApplicationUser
ú ´
>
´ ¨
userManager
≠ ∏
)
∏ π
{ 	
_recipeRepository 
= 
recipeRepository  0
;0 1
_productRepository 
=  
_productRepository! 3
=4 5
productRepo6 A
;A B!
_recipeTypeRepository !
=! " 
recipeTypeRepository" 6
;6 7
_userManager 
= 
userManager %
;% &
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
CreateRecipe) 5
(5 6
[6 7
FromBody7 ?
]? @
CreateRecipeDTOA P
requestQ X
)X Y
{ 	
var   
authorEmail   
=   
request   %
.  % &
Author  & ,
;  , -
if!! 
(!! 
string!! 
.!! 
IsNullOrEmpty!! $
(!!$ %
authorEmail!!% 0
)!!0 1
)!!1 2
{"" 
return## 

BadRequest## !
(##! "
$str##" =
)##= >
;##> ?
}$$ 
var&& 
user&& 
=&& 
await&& 
_userManager&& )
.&&) *
FindByEmailAsync&&* :
(&&: ;
authorEmail&&; F
)&&F G
;&&G H
var)) 
recipe)) 
=)) 
new)) 
Recipee)) $
{** 
Title++ 
=++ 
request++ 
.++  
Title++  %
,++% &
ShortDescription,,  
=,,! "
request,,# *
.,,* +
ShortDescription,,+ ;
,,,; <
Description-- 
=-- 
request-- %
.--% &
Description--& 1
,--1 2
ImageUrl.. 
=.. 
request.. "
..." #
ImageUrl..# +
,..+ ,
Preparation// 
=// 
request// %
.//% &
Preparation//& 1
,//1 2

SkillLevel00 
=00 
request00 $
.00$ %

SkillLevel00% /
,00/ 0
TimeForCooking11 
=11  
request11! (
.11( )
TimeForCooking11) 7
,117 8
Products22 
=22 
new22 
List22 #
<22# $
Product22$ +
>22+ ,
(22, -
)22- .
,22. /
Type33 
=33 
new33 

RecipeType33 %
(33% &
)33& '
,33' (
User44 
=44 
new44 
ApplicationUser44 *
(44* +
)44+ ,
}66 
;66 
foreach88 
(88 
var88 
	productId88 "
in88# %
request88& -
.88- .
Products88. 6
)886 7
{99 
var:: 
existingProduct:: #
=::$ %
await::& +
_productRepository::, >
.::> ?
GetByIdAsync::? K
(::K L
	productId::L U
)::U V
;::V W
if;; 
(;; 
existingProduct;; #
is;;$ &
not;;' *
null;;+ /
);;/ 0
{<< 
recipe== 
.== 
Products== #
.==# $
Add==$ '
(==' (
existingProduct==( 7
)==7 8
;==8 9
}>> 
}?? 
var@@ 
existingType@@ 
=@@ 
await@@ $!
_recipeTypeRepository@@% :
.@@: ;
GetByIdAsync@@; G
(@@G H
request@@H O
.@@O P
Type@@P T
)@@T U
;@@U V
ifAA 
(AA 
existingTypeAA 
!=AA 
nullAA  $
)AA$ %
{BB 
recipeCC 
.CC 
TypeCC 
=CC 
existingTypeCC *
;CC* +
}DD 
ifFF 
(FF 
userFF 
!=FF 
nullFF 
)FF 
{GG 
recipeHH 
.HH 
UserHH 
=HH 
userHH "
;HH" #
}II 
recipeJJ 
=JJ 
awaitJJ 
_recipeRepositoryJJ ,
.JJ, -
CreateAsyncJJ- 8
(JJ8 9
recipeJJ9 ?
)JJ? @
;JJ@ A
varKK 
responseKK 
=KK 
newKK 
	RecipeDTOKK (
{LL 
IdMM 
=MM 
recipeMM 
.MM 
IdMM 
,MM 
TitleNN 
=NN 
recipeNN 
.NN 
TitleNN $
,NN$ %
ShortDescriptionOO  
=OO! "
recipeOO# )
.OO) *
ShortDescriptionOO* :
,OO: ;
DescriptionPP 
=PP 
recipePP $
.PP$ %
DescriptionPP% 0
,PP0 1
ImageUrlQQ 
=QQ 
recipeQQ !
.QQ! "
ImageUrlQQ" *
,QQ* +
PreparationRR 
=RR 
recipeRR $
.RR$ %
PreparationRR% 0
,RR0 1

SkillLevelSS 
=SS 
recipeSS #
.SS# $

SkillLevelSS$ .
,SS. /
TimeForCookingTT 
=TT  
recipeTT! '
.TT' (
TimeForCookingTT( 6
,TT6 7
TypeUU 
=UU 
recipeUU 
.UU 
TypeUU "
,UU" #
ProductsVV 
=VV 
recipeVV !
.VV! "
ProductsVV" *
.VV* +
SelectVV+ 1
(VV1 2
xVV2 3
=>VV4 6
newVV7 :

ProductDTOVV; E
{WW 
IdXX 
=XX 
xXX 
.XX 
IdXX 
,XX 
ProductNameYY 
=YY  !
xYY" #
.YY# $
ProductNameYY$ /
==YY0 2
nullYY3 7
?YY8 9
$strYY: <
:YY= >
xYY? @
.YY@ A
ProductNameYYA L
,YYL M
}ZZ 
)ZZ 
.ZZ 
ToListZZ 
(ZZ 
)ZZ 
}\\ 
;\\ 
return]] 
Ok]] 
(]] 
response]] 
)]] 
;]]  
}^^ 	
[`` 	
HttpPut``	 
]`` 
[aa 	
Routeaa	 
(aa 
$straa 
)aa 
]aa 
publicbb 
asyncbb 
Taskbb 
<bb 
IActionResultbb '
>bb' (
UpdateRecipeByIdbb) 9
(bb9 :
[bb: ;
	FromRoutebb; D
]bbD E
intbbF I
idbbJ L
,bbL M"
UpdateRecipeRequestDTObbN d
requestbbe l
)bbl m
{cc 	
varee 
recipeee 
=ee 
newee 
Recipeeee $
{ff 
Idgg 
=gg 
idgg 
,gg 
Titlehh 
=hh 
requesthh 
.hh  
Titlehh  %
,hh% &
ShortDescriptionii  
=ii! "
requestii# *
.ii* +
ShortDescriptionii+ ;
,ii; <
Descriptionjj 
=jj 
requestjj %
.jj% &
Descriptionjj& 1
,jj1 2
ImageUrlkk 
=kk 
requestkk "
.kk" #
ImageUrlkk# +
,kk+ ,
Preparationll 
=ll 
requestll %
.ll% &
Preparationll& 1
,ll1 2

SkillLevelmm 
=mm 
requestmm $
.mm$ %

SkillLevelmm% /
,mm/ 0
TimeForCookingnn 
=nn  
requestnn! (
.nn( )
TimeForCookingnn) 7
,nn7 8
Productsoo 
=oo 
newoo 
Listoo #
<oo# $
Productoo$ +
>oo+ ,
(oo, -
)oo- .
,oo. /
Typepp 
=pp 
newpp 

RecipeTypepp %
(pp% &
)pp& '
}qq 
;qq 
foreachrr 
(rr 
varrr 
	productIDrr "
inrr# %
requestrr& -
.rr- .
Productsrr. 6
)rr6 7
{ss 
vartt 
existingProducttt #
=tt$ %
awaittt& +
_productRepositorytt, >
.tt> ?
GetByIdAsynctt? K
(ttK L
	productIDttL U
)ttU V
;ttV W
ifuu 
(uu 
existingProductuu #
!=uu$ &
nulluu' +
)uu+ ,
{vv 
recipeww 
.ww 
Productsww #
.ww# $
Addww$ '
(ww' (
existingProductww( 7
)ww7 8
;ww8 9
}xx 
}yy 
varzz 
existingTypezz 
=zz 
awaitzz $!
_recipeTypeRepositoryzz% :
.zz: ;
GetByIdAsynczz; G
(zzG H
requestzzH O
.zzO P
TypezzP T
)zzT U
;zzU V
if{{ 
({{ 
existingType{{ 
!={{ 
null{{  $
){{$ %
{|| 
recipe}} 
.}} 
Type}} 
=}} 
existingType}} *
;}}* +
}~~ 
var 
updatedBlogPost 
=  !
await" '
_recipeRepository( 9
.9 :
UpdateAsync: E
(E F
recipeF L
)L M
;M N
if
ÄÄ 
(
ÄÄ 
updatedBlogPost
ÄÄ 
==
ÄÄ  "
null
ÄÄ# '
)
ÄÄ' (
{
ÅÅ 
return
ÇÇ 
NotFound
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÖÖ 
response
ÖÖ 
=
ÖÖ 
new
ÖÖ 
	RecipeDTO
ÖÖ (
{
ÜÜ 
Id
áá 
=
áá 
recipe
áá 
.
áá 
Id
áá 
,
áá 
Title
àà 
=
àà 
recipe
àà 
.
àà 
Title
àà $
,
àà$ %
Description
ââ 
=
ââ 
recipe
ââ $
.
ââ$ %
Description
ââ% 0
,
ââ0 1
ShortDescription
ää  
=
ää! "
recipe
ää# )
.
ää) *
ShortDescription
ää* :
,
ää: ;
ImageUrl
ãã 
=
ãã 
recipe
ãã !
.
ãã! "
ImageUrl
ãã" *
,
ãã* +
Preparation
åå 
=
åå 
recipe
åå $
.
åå$ %
Preparation
åå% 0
,
åå0 1

SkillLevel
çç 
=
çç 
recipe
çç #
.
çç# $

SkillLevel
çç$ .
,
çç. /
TimeForCooking
éé 
=
éé  
recipe
éé! '
.
éé' (
TimeForCooking
éé( 6
,
éé6 7
Products
èè 
=
èè 
recipe
èè !
.
èè! "
Products
èè" *
.
èè* +
Select
èè+ 1
(
èè1 2
x
èè2 3
=>
èè4 6
new
èè7 :

ProductDTO
èè; E
{
êê 
Id
ëë 
=
ëë 
x
ëë 
.
ëë 
Id
ëë 
,
ëë 
ProductName
íí 
=
íí  !
x
íí" #
.
íí# $
ProductName
íí$ /
==
íí0 2
null
íí3 7
?
íí8 9
$str
íí: <
:
íí= >
x
íí? @
.
íí@ A
ProductName
ííA L
,
ííL M
}
ìì 
)
ìì 
.
ìì 
ToList
ìì 
(
ìì 
)
ìì 
,
ìì 
Type
îî 
=
îî 
recipe
îî 
.
îî 
Type
îî "
}
ïï 
;
ïï 
return
ññ 
Ok
ññ 
(
ññ 
response
ññ 
)
ññ 
;
ññ  
}
óó 	
[
òò 	

HttpDelete
òò	 
]
òò 
[
ôô 	
Route
ôô	 
(
ôô 
$str
ôô 
)
ôô 
]
ôô 
public
öö 
async
öö 
Task
öö 
<
öö 
IActionResult
öö '
>
öö' (

DeleteById
öö) 3
(
öö3 4
int
öö4 7
id
öö8 :
)
öö: ;
{
õõ 	
var
úú 
deletedRecipe
úú 
=
úú 
await
úú  %
_recipeRepository
úú& 7
.
úú7 8
DeleteAsync
úú8 C
(
úúC D
id
úúD F
)
úúF G
;
úúG H
if
ùù 
(
ùù 
deletedRecipe
ùù 
==
ùù  
null
ùù! %
)
ùù% &
return
ùù' -
NotFound
ùù. 6
(
ùù6 7
)
ùù7 8
;
ùù8 9
return
ûû 
Ok
ûû 
(
ûû 
deletedRecipe
ûû #
)
ûû# $
;
ûû$ %
}
üü 	
[
†† 	
HttpGet
††	 
]
†† 
public
°° 
async
°° 
Task
°° 
<
°° 
IActionResult
°° '
>
°°' (
GetAllRecipes
°°) 6
(
°°6 7
)
°°7 8
{
¢¢ 	
var
££ 
recipes
££ 
=
££ 
await
££ 
_recipeRepository
££  1
.
££1 2
GetAllAsync
££2 =
(
££= >
)
££> ?
;
££? @
var
•• 
response
•• 
=
•• 
new
•• 
List
•• #
<
••# $
	RecipeDTO
••$ -
>
••- .
(
••. /
)
••/ 0
;
••0 1
foreach
¶¶ 
(
¶¶ 
var
¶¶ 
recipe
¶¶ 
in
¶¶  "
recipes
¶¶# *
)
¶¶* +
{
ßß 
response
®® 
.
®® 
Add
®® 
(
®® 
new
®®  
	RecipeDTO
®®! *
{
©© 
Id
™™ 
=
™™ 
recipe
™™ 
.
™™  
Id
™™  "
,
™™" #
Title
´´ 
=
´´ 
recipe
´´ "
.
´´" #
Title
´´# (
,
´´( )
ShortDescription
¨¨ $
=
¨¨% &
recipe
¨¨' -
.
¨¨- .
ShortDescription
¨¨. >
,
¨¨> ?
Description
≠≠ 
=
≠≠  !
recipe
≠≠" (
.
≠≠( )
Description
≠≠) 4
,
≠≠4 5
ImageUrl
ÆÆ 
=
ÆÆ 
recipe
ÆÆ %
.
ÆÆ% &
ImageUrl
ÆÆ& .
,
ÆÆ. /
Preparation
ØØ 
=
ØØ  !
recipe
ØØ" (
.
ØØ( )
Preparation
ØØ) 4
,
ØØ4 5

SkillLevel
∞∞ 
=
∞∞  
recipe
∞∞! '
.
∞∞' (

SkillLevel
∞∞( 2
,
∞∞2 3
TimeForCooking
±± "
=
±±# $
recipe
±±% +
.
±±+ ,
TimeForCooking
±±, :
,
±±: ;
Type
≤≤ 
=
≤≤ 
new
≤≤ 

RecipeType
≤≤ )
{
≥≥ 
Id
¥¥ 
=
¥¥ 
recipe
¥¥ #
.
¥¥# $
Type
¥¥$ (
.
¥¥( )
Id
¥¥) +
,
¥¥+ ,
Type
µµ 
=
µµ 
recipe
µµ %
.
µµ% &
Type
µµ& *
.
µµ* +
Type
µµ+ /
}
∂∂ 
,
∂∂ 
Products
∑∑ 
=
∑∑ 
recipe
∑∑ %
.
∑∑% &
Products
∑∑& .
.
∑∑. /
Select
∑∑/ 5
(
∑∑5 6
x
∑∑6 7
=>
∑∑8 :
new
∑∑; >

ProductDTO
∑∑? I
{
∏∏ 
Id
ππ 
=
ππ 
x
ππ 
.
ππ 
Id
ππ !
,
ππ! "
ProductName
∫∫ #
=
∫∫$ %
x
∫∫& '
.
∫∫' (
ProductName
∫∫( 3
==
∫∫4 6
null
∫∫7 ;
?
∫∫< =
$str
∫∫> @
:
∫∫A B
x
∫∫C D
.
∫∫D E
ProductName
∫∫E P
,
∫∫P Q
}
ªª 
)
ªª 
.
ªª 
ToList
ªª 
(
ªª 
)
ªª 
,
ªª  #
RecipeCreatorUserName
ºº )
=
ºº* +
recipe
ºº, 2
.
ºº2 3
User
ºº3 7
.
ºº7 8
UserName
ºº8 @
,
ºº@ A
Rating
ΩΩ 
=
ΩΩ 
recipe
ΩΩ #
.
ΩΩ# $
Rating
ΩΩ$ *
,
ΩΩ* +
RatedPeopleCount
ææ $
=
ææ% &
recipe
ææ' -
.
ææ- .
RatedPeopleCount
ææ. >
,
ææ> ?
}
øø 
)
øø 
;
øø 
}
¿¿ 
return
¡¡ 
Ok
¡¡ 
(
¡¡ 
response
¡¡ 
)
¡¡ 
;
¡¡  
}
¬¬ 	
[
√√ 	
HttpGet
√√	 
]
√√ 
[
ƒƒ 	
Route
ƒƒ	 
(
ƒƒ 
$str
ƒƒ 
)
ƒƒ 
]
ƒƒ 
public
≈≈ 
async
≈≈ 
Task
≈≈ 
<
≈≈ 
IActionResult
≈≈ '
>
≈≈' (
GetRecipeById
≈≈) 6
(
≈≈6 7
[
≈≈7 8
	FromRoute
≈≈8 A
]
≈≈A B
int
≈≈C F
id
≈≈G I
)
≈≈I J
{
∆∆ 	
var
«« 
recipe
«« 
=
«« 
await
«« 
_recipeRepository
«« 0
.
««0 1
GetByIdAsync
««1 =
(
««= >
id
««> @
)
««@ A
;
««A B
if
»» 
(
»» 
recipe
»» 
==
»» 
null
»» 
)
»» 
{
…… 
return
   
NotFound
   
(
    
)
    !
;
  ! "
}
ÀÀ 
var
ÃÃ 
reponse
ÃÃ 
=
ÃÃ 
new
ÃÃ 
	RecipeDTO
ÃÃ '
{
ÕÕ 
Id
ŒŒ 
=
ŒŒ 
recipe
ŒŒ 
.
ŒŒ 
Id
ŒŒ 
,
ŒŒ 
Title
œœ 
=
œœ 
recipe
œœ 
.
œœ 
Title
œœ $
,
œœ$ %
ShortDescription
––  
=
––! "
recipe
––# )
.
––) *
ShortDescription
––* :
,
––: ;
Description
—— 
=
—— 
recipe
—— $
.
——$ %
Description
——% 0
,
——0 1
ImageUrl
““ 
=
““ 
recipe
““ !
.
““! "
ImageUrl
““" *
,
““* +
Preparation
”” 
=
”” 
recipe
”” $
.
””$ %
Preparation
””% 0
,
””0 1

SkillLevel
‘‘ 
=
‘‘ 
recipe
‘‘ #
.
‘‘# $

SkillLevel
‘‘$ .
,
‘‘. /
TimeForCooking
’’ 
=
’’  
recipe
’’! '
.
’’' (
TimeForCooking
’’( 6
,
’’6 7
Type
÷÷ 
=
÷÷ 
recipe
÷÷ 
.
÷÷ 
Type
÷÷ "
,
÷÷" #
Products
◊◊ 
=
◊◊ 
recipe
◊◊ !
.
◊◊! "
Products
◊◊" *
.
◊◊* +
Select
◊◊+ 1
(
◊◊1 2
x
◊◊2 3
=>
◊◊4 6
new
◊◊7 :

ProductDTO
◊◊; E
{
ÿÿ 
Id
ŸŸ 
=
ŸŸ 
x
ŸŸ 
.
ŸŸ 
Id
ŸŸ 
,
ŸŸ 
ProductName
⁄⁄ 
=
⁄⁄  !
x
⁄⁄" #
.
⁄⁄# $
ProductName
⁄⁄$ /
==
⁄⁄0 2
null
⁄⁄3 7
?
⁄⁄8 9
$str
⁄⁄: <
:
⁄⁄= >
x
⁄⁄? @
.
⁄⁄@ A
ProductName
⁄⁄A L
,
⁄⁄L M
}
€€ 
)
€€ 
.
€€ 
ToList
€€ 
(
€€ 
)
€€ 
,
€€ #
RecipeCreatorUserName
‹‹ %
=
‹‹& '
recipe
‹‹( .
.
‹‹. /
User
‹‹/ 3
.
‹‹3 4
UserName
‹‹4 <
}
›› 
;
›› 
return
ﬁﬁ 
Ok
ﬁﬁ 
(
ﬁﬁ 
reponse
ﬁﬁ 
)
ﬁﬁ 
;
ﬁﬁ 
}
ﬂﬂ 	
[
‡‡ 	
HttpGet
‡‡	 
]
‡‡ 
[
·· 	
Route
··	 
(
·· 
$str
·· 
)
·· 
]
··  
public
‚‚ 
async
‚‚ 
Task
‚‚ 
<
‚‚ 
IActionResult
‚‚ '
>
‚‚' (
SearchByTitle
‚‚) 6
(
‚‚6 7
string
‚‚7 =
title
‚‚> C
)
‚‚C D
{
„„ 	
if
‰‰ 
(
‰‰ 
string
‰‰ 
.
‰‰  
IsNullOrWhiteSpace
‰‰ )
(
‰‰) *
title
‰‰* /
)
‰‰/ 0
)
‰‰0 1
{
ÂÂ 
return
ÊÊ 

BadRequest
ÊÊ !
(
ÊÊ! "
$str
ÊÊ" 5
)
ÊÊ5 6
;
ÊÊ6 7
}
ÁÁ 
var
ÈÈ 
result
ÈÈ 
=
ÈÈ 
await
ÈÈ 
_recipeRepository
ÈÈ 0
.
ÈÈ0 1 
SearchByTitleAsync
ÈÈ1 C
(
ÈÈC D
title
ÈÈD I
)
ÈÈI J
;
ÈÈJ K
if
ÎÎ 
(
ÎÎ 
result
ÎÎ 
==
ÎÎ 
null
ÎÎ 
)
ÎÎ 
{
ÏÏ 
return
ÌÌ 
NotFound
ÌÌ 
(
ÌÌ  
)
ÌÌ  !
;
ÌÌ! "
}
ÓÓ 
return
 
Ok
 
(
 
result
 
)
 
;
 
}
ÒÒ 	
[
ÚÚ 	
HttpGet
ÚÚ	 
]
ÚÚ 
[
ÛÛ 	
Route
ÛÛ	 
(
ÛÛ 
$str
ÛÛ  
)
ÛÛ  !
]
ÛÛ! "
public
ÙÙ 
async
ÙÙ 
Task
ÙÙ 
<
ÙÙ 
IActionResult
ÙÙ '
>
ÙÙ' ("
GetRecipesByUserName
ÙÙ) =
(
ÙÙ= >
[
ÙÙ> ?
	FromRoute
ÙÙ? H
]
ÙÙH I
string
ÙÙJ P
userName
ÙÙQ Y
)
ÙÙY Z
{
ıı 	
var
˜˜ 
user
˜˜ 
=
˜˜ 
await
˜˜ 
_userManager
˜˜ )
.
˜˜) *
FindByNameAsync
˜˜* 9
(
˜˜9 :
userName
˜˜: B
)
˜˜B C
;
˜˜C D
if
¯¯ 
(
¯¯ 
user
¯¯ 
==
¯¯ 
null
¯¯ 
)
¯¯ 
{
˘˘ 
return
˙˙ 
NotFound
˙˙ 
(
˙˙  
$"
˙˙  "
$str
˙˙" 7
{
˙˙7 8
userName
˙˙8 @
}
˙˙@ A
$str
˙˙A M
"
˙˙M N
)
˙˙N O
;
˙˙O P
}
˚˚ 
var
˛˛ 
recipes
˛˛ 
=
˛˛ 
await
˛˛ 
_recipeRepository
˛˛  1
.
˛˛1 2 
GetRecipesByUserId
˛˛2 D
(
˛˛D E
user
˛˛E I
.
˛˛I J
Id
˛˛J L
)
˛˛L M
;
˛˛M N
if
ˇˇ 
(
ˇˇ 
recipes
ˇˇ 
==
ˇˇ 
null
ˇˇ 
||
ˇˇ  "
!
ˇˇ# $
recipes
ˇˇ$ +
.
ˇˇ+ ,
Any
ˇˇ, /
(
ˇˇ/ 0
)
ˇˇ0 1
)
ˇˇ1 2
{
ÄÄ 
return
ÅÅ 
NotFound
ÅÅ 
(
ÅÅ  
$"
ÅÅ  "
$str
ÅÅ" =
{
ÅÅ= >
userName
ÅÅ> F
}
ÅÅF G
$str
ÅÅG I
"
ÅÅI J
)
ÅÅJ K
;
ÅÅK L
}
ÇÇ 
var
ÑÑ 
response
ÑÑ 
=
ÑÑ 
recipes
ÑÑ "
.
ÖÖ 
Where
ÖÖ 
(
ÖÖ 
recipe
ÖÖ 
=>
ÖÖ  
recipe
ÖÖ! '
is
ÖÖ( *
not
ÖÖ+ .
null
ÖÖ/ 3
)
ÖÖ3 4
.
ÜÜ 
Select
ÜÜ 
(
ÜÜ 
recipe
ÜÜ 
=>
ÜÜ !
new
ÜÜ" %
	RecipeDTO
ÜÜ& /
{
áá 
Id
àà 
=
àà 
recipe
àà 
.
àà 
Id
àà 
,
àà 
Title
ââ 
=
ââ 
recipe
ââ 
.
ââ 
Title
ââ $
,
ââ$ %
ShortDescription
ää  
=
ää! "
recipe
ää# )
.
ää) *
ShortDescription
ää* :
,
ää: ;
Description
ãã 
=
ãã 
recipe
ãã $
.
ãã$ %
Description
ãã% 0
,
ãã0 1
ImageUrl
åå 
=
åå 
recipe
åå !
.
åå! "
ImageUrl
åå" *
,
åå* +
Preparation
çç 
=
çç 
recipe
çç $
.
çç$ %
Preparation
çç% 0
,
çç0 1

SkillLevel
éé 
=
éé 
recipe
éé #
.
éé# $

SkillLevel
éé$ .
,
éé. /
TimeForCooking
èè 
=
èè  
recipe
èè! '
.
èè' (
TimeForCooking
èè( 6
,
èè6 7
Type
êê 
=
êê 
new
êê 

RecipeType
êê %
{
ëë 
Id
íí 
=
íí 
recipe
íí 
.
íí  
Type
íí  $
.
íí$ %
Id
íí% '
,
íí' (
Type
ìì 
=
ìì 
recipe
ìì !
.
ìì! "
Type
ìì" &
.
ìì& '
Type
ìì' +
}
îî 
,
îî 
Products
ïï 
=
ïï 
recipe
ïï !
.
ïï! "
Products
ïï" *
.
ïï* +
Select
ïï+ 1
(
ïï1 2
x
ïï2 3
=>
ïï4 6
new
ïï7 :

ProductDTO
ïï; E
{
ññ 
Id
óó 
=
óó 
x
óó 
.
óó 
Id
óó 
,
óó 
ProductName
òò 
=
òò  !
x
òò" #
.
òò# $
ProductName
òò$ /
==
òò0 2
null
òò3 7
?
òò8 9
$str
òò: <
:
òò= >
x
òò? @
.
òò@ A
ProductName
òòA L
,
òòL M
}
ôô 
)
ôô 
.
ôô 
ToList
ôô 
(
ôô 
)
ôô 
,
ôô #
RecipeCreatorUserName
öö %
=
öö& '
user
öö( ,
.
öö, -
UserName
öö- 5
}
õõ 
)
õõ 
.
õõ 
ToList
õõ 
(
õõ 
)
õõ 
;
õõ 
return
ûû 
Ok
ûû 
(
ûû 
response
ûû 
)
ûû 
;
ûû  
}
üü 	
[
†† 	
HttpPost
††	 
(
†† 
$str
†† 
)
†† 
]
†† 
public
°° 
async
°° 
Task
°° 
<
°° 
IActionResult
°° '
>
°°' (
SearchRecipes
°°) 6
(
°°6 7
[
°°7 8
FromBody
°°8 @
]
°°@ A
List
°°B F
<
°°F G
string
°°G M
>
°°M N"
selectedProductNames
°°O c
)
°°c d
{
¢¢ 	
if
££ 
(
££ "
selectedProductNames
££ $
==
££% '
null
££( ,
||
££- /
!
££0 1"
selectedProductNames
££1 E
.
££E F
Any
££F I
(
££I J
)
££J K
)
££K L
{
§§ 
return
•• 

BadRequest
•• !
(
••! "
$str
••" 7
)
••7 8
;
••8 9
}
¶¶ 
var
®® 
recipes
®® 
=
®® 
await
®® 
_recipeRepository
®®  1
.
®®1 2/
!SearchBySelectedProductNamesAsync
®®2 S
(
®®S T"
selectedProductNames
®®T h
)
®®h i
;
®®i j
return
©© 
Ok
©© 
(
©© 
recipes
©© 
)
©© 
;
©© 
}
™™ 	
[
¨¨ 	
HttpPost
¨¨	 
(
¨¨ 
$str
¨¨ 
)
¨¨ 
]
¨¨ 
public
≠≠ 
async
≠≠ 
Task
≠≠ 
<
≠≠ 
IActionResult
≠≠ '
>
≠≠' (

RateRecipe
≠≠) 3
(
≠≠3 4
[
≠≠4 5
FromBody
≠≠5 =
]
≠≠= >
RecipeRatingDTO
≠≠? N
	ratingDTO
≠≠O X
)
≠≠X Y
{
ÆÆ 	
await
ØØ 
_recipeRepository
ØØ #
.
ØØ# $
AddRatingAsync
ØØ$ 2
(
ØØ2 3
	ratingDTO
ØØ3 <
.
ØØ< =
UserId
ØØ= C
,
ØØC D
	ratingDTO
ØØE N
.
ØØN O
RecipeId
ØØO W
,
ØØW X
	ratingDTO
ØØY b
.
ØØb c
Rating
ØØc i
)
ØØi j
;
ØØj k
return
±± 
Ok
±± 
(
±± 
)
±± 
;
±± 
}
≤≤ 	
[
¥¥ 	
HttpGet
¥¥	 
(
¥¥ 
$str
¥¥ 
)
¥¥ 
]
¥¥ 
public
µµ 
async
µµ 
Task
µµ 
<
µµ 
IActionResult
µµ '
>
µµ' (
GetRecipeRating
µµ) 8
(
µµ8 9
string
µµ9 ?
userId
µµ@ F
,
µµF G
int
µµH K
id
µµL N
)
µµN O
{
∂∂ 	
var
∑∑ 
averageRating
∑∑ 
=
∑∑ 
await
∑∑  %
_recipeRepository
∑∑& 7
.
∑∑7 8#
GetAverageRatingAsync
∑∑8 M
(
∑∑M N
userId
∑∑N T
,
∑∑T U
id
∑∑V X
)
∑∑X Y
;
∑∑Y Z
return
ππ 
Ok
ππ 
(
ππ 
averageRating
ππ #
)
ππ# $
;
ππ$ %
}
∫∫ 	
[
ºº 	
HttpPost
ºº	 
(
ºº 
$str
ºº +
)
ºº+ ,
]
ºº, -
public
ΩΩ 
async
ΩΩ 
Task
ΩΩ 
<
ΩΩ 
IActionResult
ΩΩ '
>
ΩΩ' (

AddComment
ΩΩ) 3
(
ΩΩ3 4

CommentDTO
ΩΩ4 >
comment
ΩΩ? F
)
ΩΩF G
{
ææ 	
var
øø 
commentInsert
øø 
=
øø 
new
øø  #
Comment
øø$ +
{
¿¿ 
Text
¡¡ 
=
¡¡ 
comment
¡¡ 
.
¡¡ 
Comment
¡¡ &
,
¡¡& '
PostedAt
¬¬ 
=
¬¬ 
DateTime
¬¬ #
.
¬¬# $
UtcNow
¬¬$ *
,
¬¬* +
UserId
√√ 
=
√√ 
comment
√√  
.
√√  !
UserId
√√! '
,
√√' (
RecipeId
ƒƒ 
=
ƒƒ 
comment
ƒƒ "
.
ƒƒ" #
RecipeId
ƒƒ# +
,
ƒƒ+ ,

AuthorName
≈≈ 
=
≈≈ 
comment
≈≈ $
.
≈≈$ %

AuthorName
≈≈% /
,
≈≈/ 0
}
∆∆ 
;
∆∆ 
await
…… 
_recipeRepository
…… #
.
……# $
AddCommentAsync
……$ 3
(
……3 4
commentInsert
……4 A
)
……A B
;
……B C
return
ÀÀ 
Ok
ÀÀ 
(
ÀÀ 
)
ÀÀ 
;
ÀÀ 
}
ÃÃ 	
[
ŒŒ 	
HttpGet
ŒŒ	 
(
ŒŒ 
$str
ŒŒ *
)
ŒŒ* +
]
ŒŒ+ ,
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
IActionResult
œœ '
>
œœ' (#
GetCommentsByRecipeId
œœ) >
(
œœ> ?
int
œœ? B
recipeId
œœC K
)
œœK L
{
–– 	
var
—— 
comments
—— 
=
—— 
await
——  
_recipeRepository
——! 2
.
——2 3(
GetCommentsByRecipeIdAsync
——3 M
(
——M N
recipeId
——N V
)
——V W
;
——W X
if
”” 
(
”” 
comments
”” 
==
”” 
null
””  
||
””! #
!
””$ %
comments
””% -
.
””- .
Any
””. 1
(
””1 2
)
””2 3
)
””3 4
{
‘‘ 
return
’’ 
NotFound
’’ 
(
’’  
$"
’’  "
$str
’’" H
{
’’H I
recipeId
’’I Q
}
’’Q R
$str
’’R T
"
’’T U
)
’’U V
;
’’V W
}
÷÷ 
return
ÿÿ 
Ok
ÿÿ 
(
ÿÿ 
comments
ÿÿ 
)
ÿÿ 
;
ÿÿ  
}
ŸŸ 	
}
⁄⁄ 
}€€ ˝@
`C:\Users\ASUS\source\repos\Recipes_API\Recipes_APIS\Recipes_API\Controllers\ProductController.cs
	namespace		 	
Recipe		
 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
ProductController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IProductRepository +
_productRepository, >
;> ?
public 
ProductController  
(  !
IProductRepository! 3
productRepository4 E
)E F
{ 	
_productRepository 
=  
productRepository! 2
;2 3
} 	
[ 	
HttpPut	 
( 
$str 
) 
]  
public 
async 
Task 
< 
IActionResult '
>' ((
UpdateVerificationForProduct) E
(E F
intF I
idJ L
)L M
{ 	
var 
product 
= 
await 
_productRepository  2
.2 3
GetByIdAsync3 ?
(? @
id@ B
)B C
;C D
if 
( 
product 
is 
null 
)  
{ 
return 
NotFound 
(  
)  !
;! "
} 
var 
updatedProduct 
=  
await  %
_productRepository' 9
.9 :
UpdateVerifiedAsync: M
(M N
productN U
)U V
;V W
if 
( 
updatedProduct 
!= !
null" &
&&' )
updatedProduct* 8
.8 9
ProductName9 D
!=E G
nullH L
)L M
{ 
var 
response 
= 
new "

ProductDTO# -
{   
Id!! 
=!! 
updatedProduct!! '
.!!' (
Id!!( *
,!!* +
ProductName"" 
=""  !
updatedProduct""" 0
.""0 1
ProductName""1 <
}## 
;## 
return$$ 
Ok$$ 
($$ 
response$$ "
)$$" #
;$$# $
}%% 
return&& 
NotFound&& 
(&& 
)&& 
;&& 
})) 	
[** 	
HttpGet**	 
]** 
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
GetAllProducts++) 7
(++7 8
)++8 9
{,, 	
var-- 
products-- 
=-- 
await--  
_productRepository--! 3
.--3 4
GetAllAsync--4 ?
(--? @
)--@ A
;--A B
var// 
response// 
=// 
new// 
List// #
<//# $

ProductDTO//$ .
>//. /
(/// 0
)//0 1
;//1 2
foreach00 
(00 
var00 
product00  
in00! #
products00$ ,
)00, -
{11 
if22 
(22 
product22 
.22 
ProductName22 '
!=22( *
null22+ /
)22/ 0
{33 
response44 
.44 
Add44  
(44  !
new44! $

ProductDTO44% /
{55 
Id66 
=66 
product66 $
.66$ %
Id66% '
,66' (
ProductName77 #
=77$ %
product77& -
.77- .
ProductName77. 9
}88 
)88 
;88 
}99 
}:: 
return;; 
Ok;; 
(;; 
response;; 
);; 
;;;  
}<< 	
[>> 
HttpGet>> 

(>>
 
$str>> 
)>> 
]>> 
public?? 
async??	 
Task?? 
<?? 
IActionResult?? !
>??! ""
GetNonVerifiedProducts??# 9
(??9 :
)??: ;
{@@ 
varAA 
nonVerifiedProductsAA 
=AA 
awaitAA "
_productRepositoryAA# 5
.AA5 6%
GetAllNonVerifiedProductsAA6 O
(AAO P
)AAP Q
;AAQ R
varCC 
responseCC 
=CC 
newCC 
ListCC 
<CC 

ProductDTOCC %
>CC% &
(CC& '
)CC' (
;CC( )
foreachDD 

(DD 
varDD 
productDD 
inDD 
nonVerifiedProductsDD .
)DD. /
{EE 
ifFF 
(FF 
productFF 
.FF 
ProductNameFF 
!=FF 
nullFF #
)FF# $
{GG 
responseHH 
.HH 
AddHH 
(HH 
newHH 

ProductDTOHH  
{II 
IdJJ 
=JJ	 

productJJ 
.JJ 
IdJJ 
,JJ 
ProductNameKK 
=KK 
productKK 
.KK 
ProductNameKK '
}LL 
)LL 
;LL 
}MM 
}NN 
returnOO 	
OkOO
 
(OO 
responseOO 
)OO 
;OO 
}PP 
[QQ 
HttpGetQQ 

]QQ
 
[RR 	
RouteRR	 
(RR 
$strRR 
)RR 
]RR 
publicSS 
asyncSS 
TaskSS 
<SS 
IActionResultSS '
>SS' (
GetProductByIdSS) 7
(SS7 8
[SS8 9
	FromRouteSS9 B
]SSB C
intSSD G
idSSH J
)SSJ K
{TT 	
varUU 
productUU 
=UU 
awaitUU 
_productRepositoryUU  2
.UU2 3
GetByIdAsyncUU3 ?
(UU? @
idUU@ B
)UUB C
;UUC D
ifVV 
(VV 
productVV 
==VV 
nullVV 
||VV  "
productVV# *
.VV* +
ProductNameVV+ 6
==VV7 9
nullVV: >
)VV> ?
{WW 
returnXX 
NotFoundXX 
(XX  
)XX  !
;XX! "
}YY 
varZZ 
responseZZ 
=ZZ 
newZZ 

ProductDTOZZ )
{[[ 
Id\\ 
=\\ 
product\\ 
.\\ 
Id\\ 
,\\  
ProductName]] 
=]] 
product]] %
.]]% &
ProductName]]& 1
}^^ 
;^^ 
return__ 
Ok__ 
(__ 
response__ 
)__ 
;__  
}`` 	
[aa 
HttpPostaa 
]aa 
publicbb 
asyncbb	 
Taskbb 
<bb 
IActionResultbb !
>bb! "
CreateProductbb# 0
(bb0 1
[bb1 2
FromBodybb2 :
]bb: ;
ProductCreateDTObb< L
requestbbM T
)bbT U
{cc 
varee 
procuctee 
=ee 
newee 
Productee 
{ff 
ProductNamegg 
=gg 
requestgg 
.gg 
ProductNamegg %
}ii 
;ii 
varjj 
productFromDbjj 
=jj 
awaitjj 
_productRepositoryjj /
.jj/ 0
CreateAsyncjj0 ;
(jj; <
procuctjj< C
)jjC D
;jjD E
varkk 
responsekk 
=kk 
newkk 

ProductDTOkk )
{ll 
Idmm 
=mm 
productFromDbmm "
.mm" #
Idmm# %
,mm% &
ProductNamenn 
=nn 
productFromDbnn )
.nn) *
ProductNamenn* 5
}pp 
;pp 
returnqq 	
Okqq
 
(qq 
responseqq 
)qq 
;qq 
}rr 
}tt 
}uu 